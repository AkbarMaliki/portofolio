{"version":3,"sources":["webpack:///./node_modules/@firebase/remote-config/node_modules/tslib/tslib.es6.js","webpack:///./node_modules/@firebase/remote-config/dist/index.cjs.js","webpack:///./node_modules/@firebase/performance/dist/index.cjs.js","webpack:///./node_modules/firebase/dist/index.cjs.js","webpack:///./node_modules/@firebase/performance/node_modules/tslib/tslib.es6.js"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","__exportStar","m","exports","__values","o","__read","ar","error","__spread","concat","__spreadArrays","il","k","a","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","settle","fulfill","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__esModule","default","__importDefault","__classPrivateFieldGet","receiver","privateMap","has","get","__classPrivateFieldSet","set","_interopDefault","ex","firebase","_a","tslib","util","logger","component","CachingClient","client","storage","storageCache","isCachedDataFresh","cacheMaxAgeMillis","lastSuccessfulFetchTimestampMillis","debug","cacheAgeMillis","Date","now","fetch","request","lastSuccessfulFetchResponse","response","storageOperations","_b","all","getLastSuccessfulFetchTimestampMillis","getLastSuccessfulFetchResponse","eTag","setLastSuccessfulFetchTimestampMillis","status","setLastSuccessfulFetchResponse","ERROR_DESCRIPTION_MAP","ERROR_FACTORY","ErrorFactory","hasErrorCode","errorCode","FirebaseError","code","getUserLanguage","navigatorLanguage","navigator","languages","language","RestClient","firebaseInstallations","sdkVersion","namespace","projectId","apiKey","appId","installationId","installationToken","urlBase","url","headers","requestBody","options","fetchPromise","timeoutPromise","originalError_1","responseEtag","config","state","responseBody","originalError_2","getId","getToken","window","FIREBASE_REMOTE_CONFIG_URL_BASE","sdk_version","app_instance_id","app_instance_id_token","app_id","language_code","method","JSON","stringify","_resolve","signal","addEventListener","Error","name","race","originalErrorMessage","message","undefined","json","httpStatus","RemoteConfigAbortSignal","listeners","listener","abort","forEach","DEFAULT_VALUE_FOR_BOOLEAN","DEFAULT_VALUE_FOR_STRING","DEFAULT_VALUE_FOR_NUMBER","BOOLEAN_TRUTHY_VALUES","Value","_source","_value","asString","asBoolean","toLowerCase","asNumber","num","Number","isNaN","getSource","DEFAULT_FETCH_TIMEOUT_MILLIS","DEFAULT_CACHE_MAX_AGE_MILLIS","RemoteConfig","app","_client","_storageCache","_storage","_logger","_isInitializationComplete","settings","fetchTimeoutMillis","minimumFetchIntervalMillis","defaultConfig","setLogLevel","logLevel","LogLevel","DEBUG","SILENT","ERROR","enumerable","configurable","getLastFetchStatus","activate","activeConfigEtag","getActiveConfigEtag","setActiveConfig","setActiveConfigEtag","ensureInitialized","_this","_initializePromise","loadFromStorage","abortSignal","e_1","lastFetchStatus","setTimeout","setLastFetchStatus","fetchAndActivate","getAll","getAllKeys","getActiveConfig","reduce","allConfigs","getValue","getBoolean","getNumber","getString","activeConfig","String","obj1","obj2","keys","toFirebaseError","event","originalError","APP_NAMESPACE_STORE","DB_NAME","DB_VERSION","openDatabase","indexedDB","open","onerror","onsuccess","onupgradeneeded","db","oldVersion","createObjectStore","keyPath","Storage","appName","openDbPromise","timestamp","etag","getThrottleMetadata","setThrottleMetadata","deleteThrottleMetadata","delete","transaction","objectStore","compositeKey","createCompositeKey","put","join","StorageCache","lastFetchStatusPromise","lastSuccessfulFetchTimestampMillisPromise","activeConfigPromise","timestampMillis","INTERVAL_MILLIS","BACKOFF_FACTOR","MAX_VALUE_MILLIS","RANDOM_FACTOR","calculateBackoffMillis","backoffCount","currBaseValue","Math","pow","randomWait","round","random","min","setAbortableTimeout","throttleEndTimeMillis","backoffMillis","max","timeout","clearTimeout","isRetriableError","RetryingClient","throttleMetadata","attemptFetch","version","registerRemoteConfig","firebaseInstance","remoteConfigFactory","container","getProvider","getImmediate","installations","logger$1","Logger","restClient","SDK_VERSION","retryingClient","cachingClient","remoteConfigInstance","INTERNAL","registerComponent","Component","setMultipleInstances","registerVersion","apiInstance","windowInstance","settingsServiceInstance","TRACE_START_MARK_PREFIX","TRACE_STOP_MARK_PREFIX","TRACE_MEASURE_PREFIX","OOB_TRACE_PAGE_LOAD_PREFIX","FIRST_PAINT_COUNTER_NAME","FIRST_CONTENTFUL_PAINT_COUNTER_NAME","FIRST_INPUT_DELAY_COUNTER_NAME","CONFIG_LOCAL_STORAGE_KEY","CONFIG_EXPIRY_LOCAL_STORAGE_KEY","SERVICE","SERVICE_NAME","Api","performance","PerformanceObserver","windowLocation","location","document","cookieEnabled","localStorage","perfMetrics","onFirstInputDelay","getUrl","href","split","mark","measure","measureName","mark1","mark2","getEntriesByType","type","getEntriesByName","getTimeOrigin","timeOrigin","timing","navigationStart","requiredApisAvailable","setupObserver","entryType","callback","observer","list","_i","getEntries","entry","observe","entryTypes","getInstance","setupApi","mergeStrings","part1","part2","sizeDiff","resultArray","charAt","iid","VisibilityState","SettingsService","instrumentationEnabled","dataCollectionEnabled","loggingEnabled","tracesSamplingRate","networkRequestsSamplingRate","logEndPointUrl","flTransportEndpointUrl","transportKey","logSource","logTraceAfterSampling","logNetworkAfterSampling","configTimeToLive","getAppId","firebaseAppInstance","getProjectId","getApiKey","getFlTransportFullUrl","getIidPromise","iidPromise","installationsService","iidVal","getIid","getAuthTokenPromise","authTokenPromise","authTokenVal","RESERVED_ATTRIBUTE_PREFIXES","ATTRIBUTE_FORMAT_REGEX","RegExp","MAX_ATTRIBUTE_NAME_LENGTH","MAX_ATTRIBUTE_VALUE_LENGTH","getServiceWorkerStatus","serviceWorker","controller","getVisibilityState","visibilityState","VISIBLE","HIDDEN","UNKNOWN","getEffectiveConnectionType","navigatorConnection","connection","effectiveType","isValidCustomAttributeName","matchesReservedPrefix","some","prefix","startsWith","match","isValidCustomAttributeValue","consoleLogger","INFO","REMOTE_CONFIG_SDK_VERSION","DEFAULT_CONFIGS","FIS_AUTH_PREFIX","getConfig","getStoredConfig","processConfig","getRemoteConfig","storeConfig","expiryString","getItem","configValid","configStringified","configResponse","parse","setItem","COULD_NOT_GET_CONFIG_MSG","authToken","configEndPoint","Request","Authorization","app_version","ok","catch","info","entries","fpr_enabled","fpr_log_source","fpr_log_endpoint_url","fpr_log_transport_key","fpr_vc_network_request_sampling_rate","fpr_vc_trace_sampling_rate","shouldLogAfterSampling","expiry","samplingRate","initializationPromise","initializationStatus","getInitializationPromise","initializePerf","isPerfInitialized","getDocumentReadyComplete","changeInitializationStatus","readyState","handler_1","removeEventListener","DEFAULT_SEND_INTERVAL_MS","INITIAL_SEND_TIME_DELAY_MS","DEFAULT_REMAINING_TRIES","remainingTries","queue","isTransportSetup","setupTransportService","processQueue","timeOffset","dispatchQueueEvents","staged","log_event","map","evt","source_extension_json_proto3","event_time_ms","eventTime","data","request_time_ms","client_info","client_type","js_client_info","log_source","sendEventsToFl","postToFlEndpoint","res","transportWait","nextRequestWaitMillis","requestOffset","logResponseDetails","isArray","responseAction","flTransportFullUrl","addToQueue","transportHandler","serializer","args","sendLog","resource","resourceType","logTrace","trace","settingsService","isAuto","sendTraceLog","logNetworkRequest","networkRequest","networkRequestUrl","logEndpointUrl","flEndpointUrl","serializeNetworkRequest","serializeTrace","networkRequestMetric","http_method","httpMethod","http_response_code","response_payload_bytes","responsePayloadBytes","client_start_time_us","startTimeUs","time_to_response_initiated_us","timeToResponseInitiatedUs","time_to_response_completed_us","timeToResponseCompletedUs","perfMetric","application_info","getApplicationInfo","network_request_metric","traceMetric","is_auto","duration_us","durationUs","counters","customAttributes","getAttributes","custom_attributes","trace_metric","google_app_id","web_app_info","page_url","service_worker_status","visibility_state","effective_connection_type","application_process_state","MAX_METRIC_NAME_LENGTH","RESERVED_AUTO_PREFIX","oobMetrics","isValidMetricName","traceName","Trace","traceMeasureName","api","randomId","floor","traceStartMark","traceStopMark","traceMeasure","calculateTraceMetrics","start","stop","record","startTime","duration","attributes","metrics","metric","incrementMetric","counter","putMetric","customMetricName","getMetric","putAttribute","attr","isValidName","isValidValue","attributeName","attributeValue","getAttribute","removeAttribute","setStartTime","setDuration","perfMeasureEntries","perfMeasureEntry","createOobTrace","navigationTimings","paintTimings","firstInputDelay","route","timeOriginUs","domInteractive","domContentLoadedEventEnd","loadEventEnd","FIRST_PAINT","FIRST_CONTENTFUL_PAINT","firstPaint","find","paintObject","firstContentfulPaint","createUserTimingTrace","createNetworkRequestEntry","performanceEntry","responseStart","responseEnd","transferSize","FID_WAIT_TIME_MS","setupOobResources","setupOobTraces","setupNetworkRequests","setupUserTimingTraces","resources","resources_1","timeoutId_1","fid","measures","measures_1","substring","PerformanceController","val","DEFAULT_ENTRY_NAME","registerPerformance","instance","factoryMethod","name$1","version$1","console","warn","module"],"mappings":"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","file":"js/chunk-47c5790e.e8eda8df.js","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar firebase = _interopDefault(require('@firebase/app'));\nrequire('@firebase/installations');\nvar tslib = require('tslib');\nvar util = require('@firebase/util');\nvar logger = require('@firebase/logger');\nvar component = require('@firebase/component');\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Implements the {@link RemoteConfigClient} abstraction with success response caching.\r\n *\r\n * <p>Comparable to the browser's Cache API for responses, but the Cache API requires a Service\r\n * Worker, which requires HTTPS, which would significantly complicate SDK installation. Also, the\r\n * Cache API doesn't support matching entries by time.\r\n */\r\nvar CachingClient = /** @class */ (function () {\r\n    function CachingClient(client, storage, storageCache, logger) {\r\n        this.client = client;\r\n        this.storage = storage;\r\n        this.storageCache = storageCache;\r\n        this.logger = logger;\r\n    }\r\n    /**\r\n     * Returns true if the age of the cached fetched configs is less than or equal to\r\n     * {@link Settings#minimumFetchIntervalInSeconds}.\r\n     *\r\n     * <p>This is comparable to passing `headers = { 'Cache-Control': max-age <maxAge> }` to the\r\n     * native Fetch API.\r\n     *\r\n     * <p>Visible for testing.\r\n     */\r\n    CachingClient.prototype.isCachedDataFresh = function (cacheMaxAgeMillis, lastSuccessfulFetchTimestampMillis) {\r\n        // Cache can only be fresh if it's populated.\r\n        if (!lastSuccessfulFetchTimestampMillis) {\r\n            this.logger.debug('Config fetch cache check. Cache unpopulated.');\r\n            return false;\r\n        }\r\n        // Calculates age of cache entry.\r\n        var cacheAgeMillis = Date.now() - lastSuccessfulFetchTimestampMillis;\r\n        var isCachedDataFresh = cacheAgeMillis <= cacheMaxAgeMillis;\r\n        this.logger.debug('Config fetch cache check.' +\r\n            (\" Cache age millis: \" + cacheAgeMillis + \".\") +\r\n            (\" Cache max age millis (minimumFetchIntervalMillis setting): \" + cacheMaxAgeMillis + \".\") +\r\n            (\" Is cache hit: \" + isCachedDataFresh + \".\"));\r\n        return isCachedDataFresh;\r\n    };\r\n    CachingClient.prototype.fetch = function (request) {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var _a, lastSuccessfulFetchTimestampMillis, lastSuccessfulFetchResponse, response, storageOperations;\r\n            return tslib.__generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, Promise.all([\r\n                            this.storage.getLastSuccessfulFetchTimestampMillis(),\r\n                            this.storage.getLastSuccessfulFetchResponse()\r\n                        ])];\r\n                    case 1:\r\n                        _a = _b.sent(), lastSuccessfulFetchTimestampMillis = _a[0], lastSuccessfulFetchResponse = _a[1];\r\n                        // Exits early on cache hit.\r\n                        if (lastSuccessfulFetchResponse &&\r\n                            this.isCachedDataFresh(request.cacheMaxAgeMillis, lastSuccessfulFetchTimestampMillis)) {\r\n                            return [2 /*return*/, lastSuccessfulFetchResponse];\r\n                        }\r\n                        // Deviates from pure decorator by not honoring a passed ETag since we don't have a public API\r\n                        // that allows the caller to pass an ETag.\r\n                        request.eTag =\r\n                            lastSuccessfulFetchResponse && lastSuccessfulFetchResponse.eTag;\r\n                        return [4 /*yield*/, this.client.fetch(request)];\r\n                    case 2:\r\n                        response = _b.sent();\r\n                        storageOperations = [\r\n                            // Uses write-through cache for consistency with synchronous public API.\r\n                            this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())\r\n                        ];\r\n                        if (response.status === 200) {\r\n                            // Caches response only if it has changed, ie non-304 responses.\r\n                            storageOperations.push(this.storage.setLastSuccessfulFetchResponse(response));\r\n                        }\r\n                        return [4 /*yield*/, Promise.all(storageOperations)];\r\n                    case 3:\r\n                        _b.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return CachingClient;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar _a;\r\nvar ERROR_DESCRIPTION_MAP = (_a = {},\r\n    _a[\"registration-window\" /* REGISTRATION_WINDOW */] = 'Undefined window object. This SDK only supports usage in a browser environment.',\r\n    _a[\"registration-project-id\" /* REGISTRATION_PROJECT_ID */] = 'Undefined project identifier. Check Firebase app initialization.',\r\n    _a[\"registration-api-key\" /* REGISTRATION_API_KEY */] = 'Undefined API key. Check Firebase app initialization.',\r\n    _a[\"registration-app-id\" /* REGISTRATION_APP_ID */] = 'Undefined app identifier. Check Firebase app initialization.',\r\n    _a[\"storage-open\" /* STORAGE_OPEN */] = 'Error thrown when opening storage. Original error: {$originalErrorMessage}.',\r\n    _a[\"storage-get\" /* STORAGE_GET */] = 'Error thrown when reading from storage. Original error: {$originalErrorMessage}.',\r\n    _a[\"storage-set\" /* STORAGE_SET */] = 'Error thrown when writing to storage. Original error: {$originalErrorMessage}.',\r\n    _a[\"storage-delete\" /* STORAGE_DELETE */] = 'Error thrown when deleting from storage. Original error: {$originalErrorMessage}.',\r\n    _a[\"fetch-client-network\" /* FETCH_NETWORK */] = 'Fetch client failed to connect to a network. Check Internet connection.' +\r\n        ' Original error: {$originalErrorMessage}.',\r\n    _a[\"fetch-timeout\" /* FETCH_TIMEOUT */] = 'The config fetch request timed out. ' +\r\n        ' Configure timeout using \"fetchTimeoutMillis\" SDK setting.',\r\n    _a[\"fetch-throttle\" /* FETCH_THROTTLE */] = 'The config fetch request timed out while in an exponential backoff state.' +\r\n        ' Configure timeout using \"fetchTimeoutMillis\" SDK setting.' +\r\n        ' Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',\r\n    _a[\"fetch-client-parse\" /* FETCH_PARSE */] = 'Fetch client could not parse response.' +\r\n        ' Original error: {$originalErrorMessage}.',\r\n    _a[\"fetch-status\" /* FETCH_STATUS */] = 'Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.',\r\n    _a);\r\nvar ERROR_FACTORY = new util.ErrorFactory('remoteconfig' /* service */, 'Remote Config' /* service name */, ERROR_DESCRIPTION_MAP);\r\n// Note how this is like typeof/instanceof, but for ErrorCode.\r\nfunction hasErrorCode(e, errorCode) {\r\n    return e instanceof util.FirebaseError && e.code.indexOf(errorCode) !== -1;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Attempts to get the most accurate browser language setting.\r\n *\r\n * <p>Adapted from getUserLanguage in packages/auth/src/utils.js for TypeScript.\r\n *\r\n * <p>Defers default language specification to server logic for consistency.\r\n *\r\n * @param navigatorLanguage Enables tests to override read-only {@link NavigatorLanguage}.\r\n */\r\nfunction getUserLanguage(navigatorLanguage) {\r\n    if (navigatorLanguage === void 0) { navigatorLanguage = navigator; }\r\n    return (\r\n    // Most reliable, but only supported in Chrome/Firefox.\r\n    (navigatorLanguage.languages && navigatorLanguage.languages[0]) ||\r\n        // Supported in most browsers, but returns the language of the browser\r\n        // UI, not the language set in browser settings.\r\n        navigatorLanguage.language\r\n    // Polyfill otherwise.\r\n    );\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Implements the Client abstraction for the Remote Config REST API.\r\n */\r\nvar RestClient = /** @class */ (function () {\r\n    function RestClient(firebaseInstallations, sdkVersion, namespace, projectId, apiKey, appId) {\r\n        this.firebaseInstallations = firebaseInstallations;\r\n        this.sdkVersion = sdkVersion;\r\n        this.namespace = namespace;\r\n        this.projectId = projectId;\r\n        this.apiKey = apiKey;\r\n        this.appId = appId;\r\n    }\r\n    /**\r\n     * Fetches from the Remote Config REST API.\r\n     *\r\n     * @throws a {@link ErrorCode.FETCH_NETWORK} error if {@link GlobalFetch#fetch} can't\r\n     * connect to the network.\r\n     * @throws a {@link ErrorCode.FETCH_PARSE} error if {@link Response#json} can't parse the\r\n     * fetch response.\r\n     * @throws a {@link ErrorCode.FETCH_STATUS} error if the service returns an HTTP error status.\r\n     */\r\n    RestClient.prototype.fetch = function (request) {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var _a, installationId, installationToken, urlBase, url, headers, requestBody, options, fetchPromise, timeoutPromise, response, originalError_1, errorCode, status, responseEtag, config, state, responseBody, originalError_2;\r\n            return tslib.__generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, Promise.all([\r\n                            this.firebaseInstallations.getId(),\r\n                            this.firebaseInstallations.getToken()\r\n                        ])];\r\n                    case 1:\r\n                        _a = _b.sent(), installationId = _a[0], installationToken = _a[1];\r\n                        urlBase = window.FIREBASE_REMOTE_CONFIG_URL_BASE ||\r\n                            'https://firebaseremoteconfig.googleapis.com';\r\n                        url = urlBase + \"/v1/projects/\" + this.projectId + \"/namespaces/\" + this.namespace + \":fetch?key=\" + this.apiKey;\r\n                        headers = {\r\n                            'Content-Type': 'application/json',\r\n                            'Content-Encoding': 'gzip',\r\n                            // Deviates from pure decorator by not passing max-age header since we don't currently have\r\n                            // service behavior using that header.\r\n                            'If-None-Match': request.eTag || '*'\r\n                        };\r\n                        requestBody = {\r\n                            /* eslint-disable camelcase */\r\n                            sdk_version: this.sdkVersion,\r\n                            app_instance_id: installationId,\r\n                            app_instance_id_token: installationToken,\r\n                            app_id: this.appId,\r\n                            language_code: getUserLanguage()\r\n                            /* eslint-enable camelcase */\r\n                        };\r\n                        options = {\r\n                            method: 'POST',\r\n                            headers: headers,\r\n                            body: JSON.stringify(requestBody)\r\n                        };\r\n                        fetchPromise = fetch(url, options);\r\n                        timeoutPromise = new Promise(function (_resolve, reject) {\r\n                            // Maps async event listener to Promise API.\r\n                            request.signal.addEventListener(function () {\r\n                                // Emulates https://heycam.github.io/webidl/#aborterror\r\n                                var error = new Error('The operation was aborted.');\r\n                                error.name = 'AbortError';\r\n                                reject(error);\r\n                            });\r\n                        });\r\n                        _b.label = 2;\r\n                    case 2:\r\n                        _b.trys.push([2, 5, , 6]);\r\n                        return [4 /*yield*/, Promise.race([fetchPromise, timeoutPromise])];\r\n                    case 3:\r\n                        _b.sent();\r\n                        return [4 /*yield*/, fetchPromise];\r\n                    case 4:\r\n                        response = _b.sent();\r\n                        return [3 /*break*/, 6];\r\n                    case 5:\r\n                        originalError_1 = _b.sent();\r\n                        errorCode = \"fetch-client-network\" /* FETCH_NETWORK */;\r\n                        if (originalError_1.name === 'AbortError') {\r\n                            errorCode = \"fetch-timeout\" /* FETCH_TIMEOUT */;\r\n                        }\r\n                        throw ERROR_FACTORY.create(errorCode, {\r\n                            originalErrorMessage: originalError_1.message\r\n                        });\r\n                    case 6:\r\n                        status = response.status;\r\n                        responseEtag = response.headers.get('ETag') || undefined;\r\n                        if (!(response.status === 200)) return [3 /*break*/, 11];\r\n                        responseBody = void 0;\r\n                        _b.label = 7;\r\n                    case 7:\r\n                        _b.trys.push([7, 9, , 10]);\r\n                        return [4 /*yield*/, response.json()];\r\n                    case 8:\r\n                        responseBody = _b.sent();\r\n                        return [3 /*break*/, 10];\r\n                    case 9:\r\n                        originalError_2 = _b.sent();\r\n                        throw ERROR_FACTORY.create(\"fetch-client-parse\" /* FETCH_PARSE */, {\r\n                            originalErrorMessage: originalError_2.message\r\n                        });\r\n                    case 10:\r\n                        config = responseBody['entries'];\r\n                        state = responseBody['state'];\r\n                        _b.label = 11;\r\n                    case 11:\r\n                        // Normalizes based on legacy state.\r\n                        if (state === 'INSTANCE_STATE_UNSPECIFIED') {\r\n                            status = 500;\r\n                        }\r\n                        else if (state === 'NO_CHANGE') {\r\n                            status = 304;\r\n                        }\r\n                        else if (state === 'NO_TEMPLATE' || state === 'EMPTY_CONFIG') {\r\n                            // These cases can be fixed remotely, so normalize to safe value.\r\n                            config = {};\r\n                        }\r\n                        // Normalize to exception-based control flow for non-success cases.\r\n                        // Encapsulates HTTP specifics in this class as much as possible. Status is still the best for\r\n                        // differentiating success states (200 from 304; the state body param is undefined in a\r\n                        // standard 304).\r\n                        if (status !== 304 && status !== 200) {\r\n                            throw ERROR_FACTORY.create(\"fetch-status\" /* FETCH_STATUS */, {\r\n                                httpStatus: status\r\n                            });\r\n                        }\r\n                        return [2 /*return*/, { status: status, eTag: responseEtag, config: config }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return RestClient;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Shims a minimal AbortSignal.\r\n *\r\n * <p>AbortController's AbortSignal conveniently decouples fetch timeout logic from other aspects\r\n * of networking, such as retries. Firebase doesn't use AbortController enough to justify a\r\n * polyfill recommendation, like we do with the Fetch API, but this minimal shim can easily be\r\n * swapped out if/when we do.\r\n */\r\nvar RemoteConfigAbortSignal = /** @class */ (function () {\r\n    function RemoteConfigAbortSignal() {\r\n        this.listeners = [];\r\n    }\r\n    RemoteConfigAbortSignal.prototype.addEventListener = function (listener) {\r\n        this.listeners.push(listener);\r\n    };\r\n    RemoteConfigAbortSignal.prototype.abort = function () {\r\n        this.listeners.forEach(function (listener) { return listener(); });\r\n    };\r\n    return RemoteConfigAbortSignal;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar DEFAULT_VALUE_FOR_BOOLEAN = false;\r\nvar DEFAULT_VALUE_FOR_STRING = '';\r\nvar DEFAULT_VALUE_FOR_NUMBER = 0;\r\nvar BOOLEAN_TRUTHY_VALUES = ['1', 'true', 't', 'yes', 'y', 'on'];\r\nvar Value = /** @class */ (function () {\r\n    function Value(_source, _value) {\r\n        if (_value === void 0) { _value = DEFAULT_VALUE_FOR_STRING; }\r\n        this._source = _source;\r\n        this._value = _value;\r\n    }\r\n    Value.prototype.asString = function () {\r\n        return this._value;\r\n    };\r\n    Value.prototype.asBoolean = function () {\r\n        if (this._source === 'static') {\r\n            return DEFAULT_VALUE_FOR_BOOLEAN;\r\n        }\r\n        return BOOLEAN_TRUTHY_VALUES.indexOf(this._value.toLowerCase()) >= 0;\r\n    };\r\n    Value.prototype.asNumber = function () {\r\n        if (this._source === 'static') {\r\n            return DEFAULT_VALUE_FOR_NUMBER;\r\n        }\r\n        var num = Number(this._value);\r\n        if (isNaN(num)) {\r\n            num = DEFAULT_VALUE_FOR_NUMBER;\r\n        }\r\n        return num;\r\n    };\r\n    Value.prototype.getSource = function () {\r\n        return this._source;\r\n    };\r\n    return Value;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar DEFAULT_FETCH_TIMEOUT_MILLIS = 60 * 1000; // One minute\r\nvar DEFAULT_CACHE_MAX_AGE_MILLIS = 12 * 60 * 60 * 1000; // Twelve hours.\r\n/**\r\n * Encapsulates business logic mapping network and storage dependencies to the public SDK API.\r\n *\r\n * See {@link https://github.com/FirebasePrivate/firebase-js-sdk/blob/master/packages/firebase/index.d.ts|interface documentation} for method descriptions.\r\n */\r\nvar RemoteConfig = /** @class */ (function () {\r\n    function RemoteConfig(\r\n    // Required by FirebaseServiceFactory interface.\r\n    app, \r\n    // JS doesn't support private yet\r\n    // (https://github.com/tc39/proposal-class-fields#private-fields), so we hint using an\r\n    // underscore prefix.\r\n    _client, _storageCache, _storage, _logger) {\r\n        this.app = app;\r\n        this._client = _client;\r\n        this._storageCache = _storageCache;\r\n        this._storage = _storage;\r\n        this._logger = _logger;\r\n        // Tracks completion of initialization promise.\r\n        this._isInitializationComplete = false;\r\n        this.settings = {\r\n            fetchTimeoutMillis: DEFAULT_FETCH_TIMEOUT_MILLIS,\r\n            minimumFetchIntervalMillis: DEFAULT_CACHE_MAX_AGE_MILLIS\r\n        };\r\n        this.defaultConfig = {};\r\n    }\r\n    // Based on packages/firestore/src/util/log.ts but not static because we need per-instance levels\r\n    // to differentiate 2p and 3p use-cases.\r\n    RemoteConfig.prototype.setLogLevel = function (logLevel) {\r\n        switch (logLevel) {\r\n            case 'debug':\r\n                this._logger.logLevel = logger.LogLevel.DEBUG;\r\n                break;\r\n            case 'silent':\r\n                this._logger.logLevel = logger.LogLevel.SILENT;\r\n                break;\r\n            default:\r\n                this._logger.logLevel = logger.LogLevel.ERROR;\r\n        }\r\n    };\r\n    Object.defineProperty(RemoteConfig.prototype, \"fetchTimeMillis\", {\r\n        get: function () {\r\n            return this._storageCache.getLastSuccessfulFetchTimestampMillis() || -1;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RemoteConfig.prototype, \"lastFetchStatus\", {\r\n        get: function () {\r\n            return this._storageCache.getLastFetchStatus() || 'no-fetch-yet';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    RemoteConfig.prototype.activate = function () {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var _a, lastSuccessfulFetchResponse, activeConfigEtag;\r\n            return tslib.__generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, Promise.all([\r\n                            this._storage.getLastSuccessfulFetchResponse(),\r\n                            this._storage.getActiveConfigEtag()\r\n                        ])];\r\n                    case 1:\r\n                        _a = _b.sent(), lastSuccessfulFetchResponse = _a[0], activeConfigEtag = _a[1];\r\n                        if (!lastSuccessfulFetchResponse ||\r\n                            !lastSuccessfulFetchResponse.config ||\r\n                            !lastSuccessfulFetchResponse.eTag ||\r\n                            lastSuccessfulFetchResponse.eTag === activeConfigEtag) {\r\n                            // Either there is no successful fetched config, or is the same as current active\r\n                            // config.\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        return [4 /*yield*/, Promise.all([\r\n                                this._storageCache.setActiveConfig(lastSuccessfulFetchResponse.config),\r\n                                this._storage.setActiveConfigEtag(lastSuccessfulFetchResponse.eTag)\r\n                            ])];\r\n                    case 2:\r\n                        _b.sent();\r\n                        return [2 /*return*/, true];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    RemoteConfig.prototype.ensureInitialized = function () {\r\n        var _this = this;\r\n        if (!this._initializePromise) {\r\n            this._initializePromise = this._storageCache\r\n                .loadFromStorage()\r\n                .then(function () {\r\n                _this._isInitializationComplete = true;\r\n            });\r\n        }\r\n        return this._initializePromise;\r\n    };\r\n    /**\r\n     * @throws a {@link ErrorCode.FETCH_CLIENT_TIMEOUT} if the request takes longer than\r\n     * {@link Settings.fetchTimeoutInSeconds} or\r\n     * {@link DEFAULT_FETCH_TIMEOUT_SECONDS}.\r\n     */\r\n    RemoteConfig.prototype.fetch = function () {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var abortSignal, e_1, lastFetchStatus;\r\n            var _this = this;\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        abortSignal = new RemoteConfigAbortSignal();\r\n                        setTimeout(function () { return tslib.__awaiter(_this, void 0, void 0, function () {\r\n                            return tslib.__generator(this, function (_a) {\r\n                                // Note a very low delay, eg < 10ms, can elapse before listeners are initialized.\r\n                                abortSignal.abort();\r\n                                return [2 /*return*/];\r\n                            });\r\n                        }); }, this.settings.fetchTimeoutMillis);\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 4, , 6]);\r\n                        return [4 /*yield*/, this._client.fetch({\r\n                                cacheMaxAgeMillis: this.settings.minimumFetchIntervalMillis,\r\n                                signal: abortSignal\r\n                            })];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this._storageCache.setLastFetchStatus('success')];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 6];\r\n                    case 4:\r\n                        e_1 = _a.sent();\r\n                        lastFetchStatus = hasErrorCode(e_1, \"fetch-throttle\" /* FETCH_THROTTLE */)\r\n                            ? 'throttle'\r\n                            : 'failure';\r\n                        return [4 /*yield*/, this._storageCache.setLastFetchStatus(lastFetchStatus)];\r\n                    case 5:\r\n                        _a.sent();\r\n                        throw e_1;\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    RemoteConfig.prototype.fetchAndActivate = function () {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.fetch()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/, this.activate()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    RemoteConfig.prototype.getAll = function () {\r\n        var _this = this;\r\n        return getAllKeys(this._storageCache.getActiveConfig(), this.defaultConfig).reduce(function (allConfigs, key) {\r\n            allConfigs[key] = _this.getValue(key);\r\n            return allConfigs;\r\n        }, {});\r\n    };\r\n    RemoteConfig.prototype.getBoolean = function (key) {\r\n        return this.getValue(key).asBoolean();\r\n    };\r\n    RemoteConfig.prototype.getNumber = function (key) {\r\n        return this.getValue(key).asNumber();\r\n    };\r\n    RemoteConfig.prototype.getString = function (key) {\r\n        return this.getValue(key).asString();\r\n    };\r\n    RemoteConfig.prototype.getValue = function (key) {\r\n        if (!this._isInitializationComplete) {\r\n            this._logger.debug(\"A value was requested for key \\\"\" + key + \"\\\" before SDK initialization completed.\" +\r\n                ' Await on ensureInitialized if the intent was to get a previously activated value.');\r\n        }\r\n        var activeConfig = this._storageCache.getActiveConfig();\r\n        if (activeConfig && activeConfig[key] !== undefined) {\r\n            return new Value('remote', activeConfig[key]);\r\n        }\r\n        else if (this.defaultConfig && this.defaultConfig[key] !== undefined) {\r\n            return new Value('default', String(this.defaultConfig[key]));\r\n        }\r\n        this._logger.debug(\"Returning static value for key \\\"\" + key + \"\\\".\" +\r\n            ' Define a default or remote value if this is unintentional.');\r\n        return new Value('static');\r\n    };\r\n    return RemoteConfig;\r\n}());\r\n/**\r\n * Dedupes and returns an array of all the keys of the received objects.\r\n */\r\nfunction getAllKeys(obj1, obj2) {\r\n    if (obj1 === void 0) { obj1 = {}; }\r\n    if (obj2 === void 0) { obj2 = {}; }\r\n    return Object.keys(tslib.__assign(tslib.__assign({}, obj1), obj2));\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Converts an error event associated with a {@link IDBRequest} to a {@link FirebaseError}.\r\n */\r\nfunction toFirebaseError(event, errorCode) {\r\n    var originalError = event.target.error || undefined;\r\n    return ERROR_FACTORY.create(errorCode, {\r\n        originalErrorMessage: originalError && originalError.message\r\n    });\r\n}\r\n/**\r\n * A general-purpose store keyed by app + namespace + {@link\r\n * ProjectNamespaceKeyFieldValue}.\r\n *\r\n * <p>The Remote Config SDK can be used with multiple app installations, and each app can interact\r\n * with multiple namespaces, so this store uses app (ID + name) and namespace as common parent keys\r\n * for a set of key-value pairs. See {@link Storage#createCompositeKey}.\r\n *\r\n * <p>Visible for testing.\r\n */\r\nvar APP_NAMESPACE_STORE = 'app_namespace_store';\r\nvar DB_NAME = 'firebase_remote_config';\r\nvar DB_VERSION = 1;\r\n// Visible for testing.\r\nfunction openDatabase() {\r\n    return new Promise(function (resolve, reject) {\r\n        var request = indexedDB.open(DB_NAME, DB_VERSION);\r\n        request.onerror = function (event) {\r\n            reject(toFirebaseError(event, \"storage-open\" /* STORAGE_OPEN */));\r\n        };\r\n        request.onsuccess = function (event) {\r\n            resolve(event.target.result);\r\n        };\r\n        request.onupgradeneeded = function (event) {\r\n            var db = event.target.result;\r\n            // We don't use 'break' in this switch statement, the fall-through\r\n            // behavior is what we want, because if there are multiple versions between\r\n            // the old version and the current version, we want ALL the migrations\r\n            // that correspond to those versions to run, not only the last one.\r\n            // eslint-disable-next-line default-case\r\n            switch (event.oldVersion) {\r\n                case 0:\r\n                    db.createObjectStore(APP_NAMESPACE_STORE, {\r\n                        keyPath: 'compositeKey'\r\n                    });\r\n            }\r\n        };\r\n    });\r\n}\r\n/**\r\n * Abstracts data persistence.\r\n */\r\nvar Storage = /** @class */ (function () {\r\n    /**\r\n     * @param appId enables storage segmentation by app (ID + name).\r\n     * @param appName enables storage segmentation by app (ID + name).\r\n     * @param namespace enables storage segmentation by namespace.\r\n     */\r\n    function Storage(appId, appName, namespace, openDbPromise) {\r\n        if (openDbPromise === void 0) { openDbPromise = openDatabase(); }\r\n        this.appId = appId;\r\n        this.appName = appName;\r\n        this.namespace = namespace;\r\n        this.openDbPromise = openDbPromise;\r\n    }\r\n    Storage.prototype.getLastFetchStatus = function () {\r\n        return this.get('last_fetch_status');\r\n    };\r\n    Storage.prototype.setLastFetchStatus = function (status) {\r\n        return this.set('last_fetch_status', status);\r\n    };\r\n    // This is comparable to a cache entry timestamp. If we need to expire other data, we could\r\n    // consider adding timestamp to all storage records and an optional max age arg to getters.\r\n    Storage.prototype.getLastSuccessfulFetchTimestampMillis = function () {\r\n        return this.get('last_successful_fetch_timestamp_millis');\r\n    };\r\n    Storage.prototype.setLastSuccessfulFetchTimestampMillis = function (timestamp) {\r\n        return this.set('last_successful_fetch_timestamp_millis', timestamp);\r\n    };\r\n    Storage.prototype.getLastSuccessfulFetchResponse = function () {\r\n        return this.get('last_successful_fetch_response');\r\n    };\r\n    Storage.prototype.setLastSuccessfulFetchResponse = function (response) {\r\n        return this.set('last_successful_fetch_response', response);\r\n    };\r\n    Storage.prototype.getActiveConfig = function () {\r\n        return this.get('active_config');\r\n    };\r\n    Storage.prototype.setActiveConfig = function (config) {\r\n        return this.set('active_config', config);\r\n    };\r\n    Storage.prototype.getActiveConfigEtag = function () {\r\n        return this.get('active_config_etag');\r\n    };\r\n    Storage.prototype.setActiveConfigEtag = function (etag) {\r\n        return this.set('active_config_etag', etag);\r\n    };\r\n    Storage.prototype.getThrottleMetadata = function () {\r\n        return this.get('throttle_metadata');\r\n    };\r\n    Storage.prototype.setThrottleMetadata = function (metadata) {\r\n        return this.set('throttle_metadata', metadata);\r\n    };\r\n    Storage.prototype.deleteThrottleMetadata = function () {\r\n        return this.delete('throttle_metadata');\r\n    };\r\n    Storage.prototype.get = function (key) {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var db;\r\n            var _this = this;\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.openDbPromise];\r\n                    case 1:\r\n                        db = _a.sent();\r\n                        return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                                var transaction = db.transaction([APP_NAMESPACE_STORE], 'readonly');\r\n                                var objectStore = transaction.objectStore(APP_NAMESPACE_STORE);\r\n                                var compositeKey = _this.createCompositeKey(key);\r\n                                try {\r\n                                    var request = objectStore.get(compositeKey);\r\n                                    request.onerror = function (event) {\r\n                                        reject(toFirebaseError(event, \"storage-get\" /* STORAGE_GET */));\r\n                                    };\r\n                                    request.onsuccess = function (event) {\r\n                                        var result = event.target.result;\r\n                                        if (result) {\r\n                                            resolve(result.value);\r\n                                        }\r\n                                        else {\r\n                                            resolve(undefined);\r\n                                        }\r\n                                    };\r\n                                }\r\n                                catch (e) {\r\n                                    reject(ERROR_FACTORY.create(\"storage-get\" /* STORAGE_GET */, {\r\n                                        originalErrorMessage: e && e.message\r\n                                    }));\r\n                                }\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Storage.prototype.set = function (key, value) {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var db;\r\n            var _this = this;\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.openDbPromise];\r\n                    case 1:\r\n                        db = _a.sent();\r\n                        return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                                var transaction = db.transaction([APP_NAMESPACE_STORE], 'readwrite');\r\n                                var objectStore = transaction.objectStore(APP_NAMESPACE_STORE);\r\n                                var compositeKey = _this.createCompositeKey(key);\r\n                                try {\r\n                                    var request = objectStore.put({\r\n                                        compositeKey: compositeKey,\r\n                                        value: value\r\n                                    });\r\n                                    request.onerror = function (event) {\r\n                                        reject(toFirebaseError(event, \"storage-set\" /* STORAGE_SET */));\r\n                                    };\r\n                                    request.onsuccess = function () {\r\n                                        resolve();\r\n                                    };\r\n                                }\r\n                                catch (e) {\r\n                                    reject(ERROR_FACTORY.create(\"storage-set\" /* STORAGE_SET */, {\r\n                                        originalErrorMessage: e && e.message\r\n                                    }));\r\n                                }\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Storage.prototype.delete = function (key) {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var db;\r\n            var _this = this;\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.openDbPromise];\r\n                    case 1:\r\n                        db = _a.sent();\r\n                        return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                                var transaction = db.transaction([APP_NAMESPACE_STORE], 'readwrite');\r\n                                var objectStore = transaction.objectStore(APP_NAMESPACE_STORE);\r\n                                var compositeKey = _this.createCompositeKey(key);\r\n                                try {\r\n                                    var request = objectStore.delete(compositeKey);\r\n                                    request.onerror = function (event) {\r\n                                        reject(toFirebaseError(event, \"storage-delete\" /* STORAGE_DELETE */));\r\n                                    };\r\n                                    request.onsuccess = function () {\r\n                                        resolve();\r\n                                    };\r\n                                }\r\n                                catch (e) {\r\n                                    reject(ERROR_FACTORY.create(\"storage-delete\" /* STORAGE_DELETE */, {\r\n                                        originalErrorMessage: e && e.message\r\n                                    }));\r\n                                }\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    // Facilitates composite key functionality (which is unsupported in IE).\r\n    Storage.prototype.createCompositeKey = function (key) {\r\n        return [this.appId, this.appName, this.namespace, key].join();\r\n    };\r\n    return Storage;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A memory cache layer over storage to support the SDK's synchronous read requirements.\r\n */\r\nvar StorageCache = /** @class */ (function () {\r\n    function StorageCache(storage) {\r\n        this.storage = storage;\r\n    }\r\n    /**\r\n     * Memory-only getters\r\n     */\r\n    StorageCache.prototype.getLastFetchStatus = function () {\r\n        return this.lastFetchStatus;\r\n    };\r\n    StorageCache.prototype.getLastSuccessfulFetchTimestampMillis = function () {\r\n        return this.lastSuccessfulFetchTimestampMillis;\r\n    };\r\n    StorageCache.prototype.getActiveConfig = function () {\r\n        return this.activeConfig;\r\n    };\r\n    /**\r\n     * Read-ahead getter\r\n     */\r\n    StorageCache.prototype.loadFromStorage = function () {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var lastFetchStatusPromise, lastSuccessfulFetchTimestampMillisPromise, activeConfigPromise, lastFetchStatus, lastSuccessfulFetchTimestampMillis, activeConfig;\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        lastFetchStatusPromise = this.storage.getLastFetchStatus();\r\n                        lastSuccessfulFetchTimestampMillisPromise = this.storage.getLastSuccessfulFetchTimestampMillis();\r\n                        activeConfigPromise = this.storage.getActiveConfig();\r\n                        return [4 /*yield*/, lastFetchStatusPromise];\r\n                    case 1:\r\n                        lastFetchStatus = _a.sent();\r\n                        if (lastFetchStatus) {\r\n                            this.lastFetchStatus = lastFetchStatus;\r\n                        }\r\n                        return [4 /*yield*/, lastSuccessfulFetchTimestampMillisPromise];\r\n                    case 2:\r\n                        lastSuccessfulFetchTimestampMillis = _a.sent();\r\n                        if (lastSuccessfulFetchTimestampMillis) {\r\n                            this.lastSuccessfulFetchTimestampMillis = lastSuccessfulFetchTimestampMillis;\r\n                        }\r\n                        return [4 /*yield*/, activeConfigPromise];\r\n                    case 3:\r\n                        activeConfig = _a.sent();\r\n                        if (activeConfig) {\r\n                            this.activeConfig = activeConfig;\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Write-through setters\r\n     */\r\n    StorageCache.prototype.setLastFetchStatus = function (status) {\r\n        this.lastFetchStatus = status;\r\n        return this.storage.setLastFetchStatus(status);\r\n    };\r\n    StorageCache.prototype.setLastSuccessfulFetchTimestampMillis = function (timestampMillis) {\r\n        this.lastSuccessfulFetchTimestampMillis = timestampMillis;\r\n        return this.storage.setLastSuccessfulFetchTimestampMillis(timestampMillis);\r\n    };\r\n    StorageCache.prototype.setActiveConfig = function (activeConfig) {\r\n        this.activeConfig = activeConfig;\r\n        return this.storage.setActiveConfig(activeConfig);\r\n    };\r\n    return StorageCache;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The amount of milliseconds to exponentially increase.\r\n */\r\nvar INTERVAL_MILLIS = 1000;\r\n/**\r\n * The factor to backoff by.\r\n * Should be a number greater than 1.\r\n */\r\nvar BACKOFF_FACTOR = 2;\r\n/**\r\n * The maximum milliseconds to increase to.\r\n *\r\n * <p>Visible for testing\r\n */\r\nvar MAX_VALUE_MILLIS = 4 * 60 * 60 * 1000; // Four hours, like iOS and Android.\r\n/**\r\n * The percentage of backoff time to randomize by.\r\n * See\r\n * http://go/safe-client-behavior#step-1-determine-the-appropriate-retry-interval-to-handle-spike-traffic\r\n * for context.\r\n *\r\n * <p>Visible for testing\r\n */\r\nvar RANDOM_FACTOR = 0.5;\r\n/**\r\n * Based on the backoff method from\r\n * https://github.com/google/closure-library/blob/master/closure/goog/math/exponentialbackoff.js.\r\n * Extracted here so we don't need to pass metadata and a stateful ExponentialBackoff object around.\r\n */\r\nfunction calculateBackoffMillis(backoffCount) {\r\n    // Calculates an exponentially increasing value.\r\n    // Deviation: calculates value from count and a constant interval, so we only need to save value\r\n    // and count to restore state.\r\n    var currBaseValue = INTERVAL_MILLIS * Math.pow(BACKOFF_FACTOR, backoffCount);\r\n    // A random \"fuzz\" to avoid waves of retries.\r\n    // Deviation: randomFactor is required.\r\n    var randomWait = Math.round(\r\n    // A fraction of the backoff value to add/subtract.\r\n    // Deviation: changes multiplication order to improve readability.\r\n    RANDOM_FACTOR *\r\n        currBaseValue *\r\n        // A random float (rounded to int by Math.round above) in the range [-1, 1]. Determines\r\n        // if we add or subtract.\r\n        (Math.random() - 0.5) *\r\n        2);\r\n    // Limits backoff to max to avoid effectively permanent backoff.\r\n    return Math.min(MAX_VALUE_MILLIS, currBaseValue + randomWait);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Supports waiting on a backoff by:\r\n *\r\n * <ul>\r\n *   <li>Promisifying setTimeout, so we can set a timeout in our Promise chain</li>\r\n *   <li>Listening on a signal bus for abort events, just like the Fetch API</li>\r\n *   <li>Failing in the same way the Fetch API fails, so timing out a live request and a throttled\r\n *       request appear the same.</li>\r\n * </ul>\r\n *\r\n * <p>Visible for testing.\r\n */\r\nfunction setAbortableTimeout(signal, throttleEndTimeMillis) {\r\n    return new Promise(function (resolve, reject) {\r\n        // Derives backoff from given end time, normalizing negative numbers to zero.\r\n        var backoffMillis = Math.max(throttleEndTimeMillis - Date.now(), 0);\r\n        var timeout = setTimeout(resolve, backoffMillis);\r\n        // Adds listener, rather than sets onabort, because signal is a shared object.\r\n        signal.addEventListener(function () {\r\n            clearTimeout(timeout);\r\n            // If the request completes before this timeout, the rejection has no effect.\r\n            reject(ERROR_FACTORY.create(\"fetch-throttle\" /* FETCH_THROTTLE */, {\r\n                throttleEndTimeMillis: throttleEndTimeMillis\r\n            }));\r\n        });\r\n    });\r\n}\r\n/**\r\n * Returns true if the {@link Error} indicates a fetch request may succeed later.\r\n */\r\nfunction isRetriableError(e) {\r\n    if (!(e instanceof util.FirebaseError)) {\r\n        return false;\r\n    }\r\n    // Uses string index defined by ErrorData, which FirebaseError implements.\r\n    var httpStatus = Number(e['httpStatus']);\r\n    return (httpStatus === 429 ||\r\n        httpStatus === 500 ||\r\n        httpStatus === 503 ||\r\n        httpStatus === 504);\r\n}\r\n/**\r\n * Decorates a Client with retry logic.\r\n *\r\n * <p>Comparable to CachingClient, but uses backoff logic instead of cache max age and doesn't cache\r\n * responses (because the SDK has no use for error responses).\r\n */\r\nvar RetryingClient = /** @class */ (function () {\r\n    function RetryingClient(client, storage) {\r\n        this.client = client;\r\n        this.storage = storage;\r\n    }\r\n    RetryingClient.prototype.fetch = function (request) {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var throttleMetadata;\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.storage.getThrottleMetadata()];\r\n                    case 1:\r\n                        throttleMetadata = (_a.sent()) || {\r\n                            backoffCount: 0,\r\n                            throttleEndTimeMillis: Date.now()\r\n                        };\r\n                        return [2 /*return*/, this.attemptFetch(request, throttleMetadata)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * A recursive helper for attempting a fetch request repeatedly.\r\n     *\r\n     * @throws any non-retriable errors.\r\n     */\r\n    RetryingClient.prototype.attemptFetch = function (request, _a) {\r\n        var throttleEndTimeMillis = _a.throttleEndTimeMillis, backoffCount = _a.backoffCount;\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var response, e_1, throttleMetadata;\r\n            return tslib.__generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: \r\n                    // Starts with a (potentially zero) timeout to support resumption from stored state.\r\n                    // Ensures the throttle end time is honored if the last attempt timed out.\r\n                    // Note the SDK will never make a request if the fetch timeout expires at this point.\r\n                    return [4 /*yield*/, setAbortableTimeout(request.signal, throttleEndTimeMillis)];\r\n                    case 1:\r\n                        // Starts with a (potentially zero) timeout to support resumption from stored state.\r\n                        // Ensures the throttle end time is honored if the last attempt timed out.\r\n                        // Note the SDK will never make a request if the fetch timeout expires at this point.\r\n                        _b.sent();\r\n                        _b.label = 2;\r\n                    case 2:\r\n                        _b.trys.push([2, 5, , 7]);\r\n                        return [4 /*yield*/, this.client.fetch(request)];\r\n                    case 3:\r\n                        response = _b.sent();\r\n                        // Note the SDK only clears throttle state if response is success or non-retriable.\r\n                        return [4 /*yield*/, this.storage.deleteThrottleMetadata()];\r\n                    case 4:\r\n                        // Note the SDK only clears throttle state if response is success or non-retriable.\r\n                        _b.sent();\r\n                        return [2 /*return*/, response];\r\n                    case 5:\r\n                        e_1 = _b.sent();\r\n                        if (!isRetriableError(e_1)) {\r\n                            throw e_1;\r\n                        }\r\n                        throttleMetadata = {\r\n                            throttleEndTimeMillis: Date.now() + calculateBackoffMillis(backoffCount),\r\n                            backoffCount: backoffCount + 1\r\n                        };\r\n                        // Persists state.\r\n                        return [4 /*yield*/, this.storage.setThrottleMetadata(throttleMetadata)];\r\n                    case 6:\r\n                        // Persists state.\r\n                        _b.sent();\r\n                        return [2 /*return*/, this.attemptFetch(request, throttleMetadata)];\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return RetryingClient;\r\n}());\n\nvar name = \"@firebase/remote-config\";\nvar version = \"0.1.22\";\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction registerRemoteConfig(firebaseInstance) {\r\n    firebaseInstance.INTERNAL.registerComponent(new component.Component('remoteConfig', remoteConfigFactory, \"PUBLIC\" /* PUBLIC */).setMultipleInstances(true));\r\n    firebaseInstance.registerVersion(name, version);\r\n    function remoteConfigFactory(container, namespace) {\r\n        /* Dependencies */\r\n        // getImmediate for FirebaseApp will always succeed\r\n        var app = container.getProvider('app').getImmediate();\r\n        // The following call will always succeed because rc has `import '@firebase/installations'`\r\n        var installations = container.getProvider('installations').getImmediate();\r\n        // Guards against the SDK being used in non-browser environments.\r\n        if (typeof window === 'undefined') {\r\n            throw ERROR_FACTORY.create(\"registration-window\" /* REGISTRATION_WINDOW */);\r\n        }\r\n        // Normalizes optional inputs.\r\n        var _a = app.options, projectId = _a.projectId, apiKey = _a.apiKey, appId = _a.appId;\r\n        if (!projectId) {\r\n            throw ERROR_FACTORY.create(\"registration-project-id\" /* REGISTRATION_PROJECT_ID */);\r\n        }\r\n        if (!apiKey) {\r\n            throw ERROR_FACTORY.create(\"registration-api-key\" /* REGISTRATION_API_KEY */);\r\n        }\r\n        if (!appId) {\r\n            throw ERROR_FACTORY.create(\"registration-app-id\" /* REGISTRATION_APP_ID */);\r\n        }\r\n        namespace = namespace || 'firebase';\r\n        var storage = new Storage(appId, app.name, namespace);\r\n        var storageCache = new StorageCache(storage);\r\n        var logger$1 = new logger.Logger(name);\r\n        // Sets ERROR as the default log level.\r\n        // See RemoteConfig#setLogLevel for corresponding normalization to ERROR log level.\r\n        logger$1.logLevel = logger.LogLevel.ERROR;\r\n        var restClient = new RestClient(installations, \r\n        // Uses the JS SDK version, by which the RC package version can be deduced, if necessary.\r\n        firebaseInstance.SDK_VERSION, namespace, projectId, apiKey, appId);\r\n        var retryingClient = new RetryingClient(restClient, storage);\r\n        var cachingClient = new CachingClient(retryingClient, storage, storageCache, logger$1);\r\n        var remoteConfigInstance = new RemoteConfig(app, cachingClient, storageCache, storage, logger$1);\r\n        // Starts warming cache.\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        remoteConfigInstance.ensureInitialized();\r\n        return remoteConfigInstance;\r\n    }\r\n}\r\nregisterRemoteConfig(firebase);\n\nexports.registerRemoteConfig = registerRemoteConfig;\n//# sourceMappingURL=index.cjs.js.map\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar firebase = _interopDefault(require('@firebase/app'));\nrequire('@firebase/installations');\nvar tslib = require('tslib');\nvar util = require('@firebase/util');\nvar logger$1 = require('@firebase/logger');\nvar component = require('@firebase/component');\n\nvar name = \"@firebase/performance\";\nvar version = \"0.3.6\";\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar SDK_VERSION = version;\r\n/** The prefix for start User Timing marks used for creating Traces. */\r\nvar TRACE_START_MARK_PREFIX = 'FB-PERF-TRACE-START';\r\n/** The prefix for stop User Timing marks used for creating Traces. */\r\nvar TRACE_STOP_MARK_PREFIX = 'FB-PERF-TRACE-STOP';\r\n/** The prefix for User Timing measure used for creating Traces. */\r\nvar TRACE_MEASURE_PREFIX = 'FB-PERF-TRACE-MEASURE';\r\n/** The prefix for out of the box page load Trace name. */\r\nvar OOB_TRACE_PAGE_LOAD_PREFIX = '_wt_';\r\nvar FIRST_PAINT_COUNTER_NAME = '_fp';\r\nvar FIRST_CONTENTFUL_PAINT_COUNTER_NAME = '_fcp';\r\nvar FIRST_INPUT_DELAY_COUNTER_NAME = '_fid';\r\nvar CONFIG_LOCAL_STORAGE_KEY = '@firebase/performance/config';\r\nvar CONFIG_EXPIRY_LOCAL_STORAGE_KEY = '@firebase/performance/configexpire';\r\nvar SERVICE = 'performance';\r\nvar SERVICE_NAME = 'Performance';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar _a;\r\nvar ERROR_DESCRIPTION_MAP = (_a = {},\r\n    _a[\"trace started\" /* TRACE_STARTED_BEFORE */] = 'Trace {$traceName} was started before.',\r\n    _a[\"trace stopped\" /* TRACE_STOPPED_BEFORE */] = 'Trace {$traceName} is not running.',\r\n    _a[\"no window\" /* NO_WINDOW */] = 'Window is not available.',\r\n    _a[\"no app id\" /* NO_APP_ID */] = 'App id is not available.',\r\n    _a[\"no project id\" /* NO_PROJECT_ID */] = 'Project id is not available.',\r\n    _a[\"no api key\" /* NO_API_KEY */] = 'Api key is not available.',\r\n    _a[\"invalid cc log\" /* INVALID_CC_LOG */] = 'Attempted to queue invalid cc event',\r\n    _a[\"FB not default\" /* FB_NOT_DEFAULT */] = 'Performance can only start when Firebase app instance is the default one.',\r\n    _a[\"RC response not ok\" /* RC_NOT_OK */] = 'RC response is not ok',\r\n    _a[\"invalid attribute name\" /* INVALID_ATTRIBUTE_NAME */] = 'Attribute name {$attributeName} is invalid.',\r\n    _a[\"invalid attribute value\" /* INVALID_ATTRIBUTE_VALUE */] = 'Attribute value {$attributeValue} is invalid.',\r\n    _a[\"invalid custom metric name\" /* INVALID_CUSTOM_METRIC_NAME */] = 'Custom metric name {$customMetricName} is invalid',\r\n    _a[\"invalid String merger input\" /* INVALID_STRING_MERGER_PARAMETER */] = 'Input for String merger is invalid, contact support team to resolve.',\r\n    _a);\r\nvar ERROR_FACTORY = new util.ErrorFactory(SERVICE, SERVICE_NAME, ERROR_DESCRIPTION_MAP);\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar apiInstance;\r\nvar windowInstance;\r\n/**\r\n * This class holds a reference to various browser related objects injected by\r\n * set methods.\r\n */\r\nvar Api = /** @class */ (function () {\r\n    function Api(window) {\r\n        this.window = window;\r\n        if (!window) {\r\n            throw ERROR_FACTORY.create(\"no window\" /* NO_WINDOW */);\r\n        }\r\n        this.performance = window.performance;\r\n        this.PerformanceObserver = window.PerformanceObserver;\r\n        this.windowLocation = window.location;\r\n        this.navigator = window.navigator;\r\n        this.document = window.document;\r\n        if (this.navigator && this.navigator.cookieEnabled) {\r\n            // If user blocks cookies on the browser, accessing localStorage will\r\n            // throw an exception.\r\n            this.localStorage = window.localStorage;\r\n        }\r\n        if (window.perfMetrics && window.perfMetrics.onFirstInputDelay) {\r\n            this.onFirstInputDelay = window.perfMetrics.onFirstInputDelay;\r\n        }\r\n    }\r\n    Api.prototype.getUrl = function () {\r\n        // Do not capture the string query part of url.\r\n        return this.windowLocation.href.split('?')[0];\r\n    };\r\n    Api.prototype.mark = function (name) {\r\n        if (!this.performance || !this.performance.mark) {\r\n            return;\r\n        }\r\n        this.performance.mark(name);\r\n    };\r\n    Api.prototype.measure = function (measureName, mark1, mark2) {\r\n        if (!this.performance || !this.performance.measure) {\r\n            return;\r\n        }\r\n        this.performance.measure(measureName, mark1, mark2);\r\n    };\r\n    Api.prototype.getEntriesByType = function (type) {\r\n        if (!this.performance || !this.performance.getEntriesByType) {\r\n            return [];\r\n        }\r\n        return this.performance.getEntriesByType(type);\r\n    };\r\n    Api.prototype.getEntriesByName = function (name) {\r\n        if (!this.performance || !this.performance.getEntriesByName) {\r\n            return [];\r\n        }\r\n        return this.performance.getEntriesByName(name);\r\n    };\r\n    Api.prototype.getTimeOrigin = function () {\r\n        // Polyfill the time origin with performance.timing.navigationStart.\r\n        return (this.performance &&\r\n            (this.performance.timeOrigin || this.performance.timing.navigationStart));\r\n    };\r\n    Api.prototype.requiredApisAvailable = function () {\r\n        if (fetch && Promise && this.navigator && this.navigator.cookieEnabled) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Api.prototype.setupObserver = function (entryType, callback) {\r\n        if (!this.PerformanceObserver) {\r\n            return;\r\n        }\r\n        var observer = new this.PerformanceObserver(function (list) {\r\n            for (var _i = 0, _a = list.getEntries(); _i < _a.length; _i++) {\r\n                var entry = _a[_i];\r\n                // `entry` is a PerformanceEntry instance.\r\n                callback(entry);\r\n            }\r\n        });\r\n        // Start observing the entry types you care about.\r\n        observer.observe({ entryTypes: [entryType] });\r\n    };\r\n    Api.getInstance = function () {\r\n        if (apiInstance === undefined) {\r\n            apiInstance = new Api(windowInstance);\r\n        }\r\n        return apiInstance;\r\n    };\r\n    return Api;\r\n}());\r\nfunction setupApi(window) {\r\n    windowInstance = window;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction mergeStrings(part1, part2) {\r\n    var sizeDiff = part1.length - part2.length;\r\n    if (sizeDiff < 0 || sizeDiff > 1) {\r\n        throw ERROR_FACTORY.create(\"invalid String merger input\" /* INVALID_STRING_MERGER_PARAMETER */);\r\n    }\r\n    var resultArray = [];\r\n    for (var i = 0; i < part1.length; i++) {\r\n        resultArray.push(part1.charAt(i));\r\n        if (part2.length > i) {\r\n            resultArray.push(part2.charAt(i));\r\n        }\r\n    }\r\n    return resultArray.join('');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar settingsServiceInstance;\r\nvar SettingsService = /** @class */ (function () {\r\n    function SettingsService() {\r\n        // The variable which controls logging of automatic traces and HTTP/S network monitoring.\r\n        this.instrumentationEnabled = true;\r\n        // The variable which controls logging of custom traces.\r\n        this.dataCollectionEnabled = true;\r\n        // Configuration flags set through remote config.\r\n        this.loggingEnabled = false;\r\n        // Sampling rate between 0 and 1.\r\n        this.tracesSamplingRate = 1;\r\n        this.networkRequestsSamplingRate = 1;\r\n        // Address of logging service.\r\n        this.logEndPointUrl = 'https://firebaselogging.googleapis.com/v0cc/log?format=json_proto';\r\n        // Performance event transport endpoint URL which should be compatible with proto3.\r\n        // New Address for transport service, not configurable via Remote Config.\r\n        this.flTransportEndpointUrl = mergeStrings('hts/frbslgigp.ogepscmv/ieo/eaylg', 'tp:/ieaeogn-agolai.o/1frlglgc/o');\r\n        this.transportKey = mergeStrings('AzSC8r6ReiGqFMyfvgow', 'Iayx0u-XT3vksVM-pIV');\r\n        // Source type for performance event logs.\r\n        this.logSource = 462;\r\n        // Flags which control per session logging of traces and network requests.\r\n        this.logTraceAfterSampling = false;\r\n        this.logNetworkAfterSampling = false;\r\n        // TTL of config retrieved from remote config in hours.\r\n        this.configTimeToLive = 12;\r\n    }\r\n    SettingsService.prototype.getAppId = function () {\r\n        var appId = this.firebaseAppInstance &&\r\n            this.firebaseAppInstance.options &&\r\n            this.firebaseAppInstance.options.appId;\r\n        if (!appId) {\r\n            throw ERROR_FACTORY.create(\"no app id\" /* NO_APP_ID */);\r\n        }\r\n        return appId;\r\n    };\r\n    SettingsService.prototype.getProjectId = function () {\r\n        var projectId = this.firebaseAppInstance &&\r\n            this.firebaseAppInstance.options &&\r\n            this.firebaseAppInstance.options.projectId;\r\n        if (!projectId) {\r\n            throw ERROR_FACTORY.create(\"no project id\" /* NO_PROJECT_ID */);\r\n        }\r\n        return projectId;\r\n    };\r\n    SettingsService.prototype.getApiKey = function () {\r\n        var apiKey = this.firebaseAppInstance &&\r\n            this.firebaseAppInstance.options &&\r\n            this.firebaseAppInstance.options.apiKey;\r\n        if (!apiKey) {\r\n            throw ERROR_FACTORY.create(\"no api key\" /* NO_API_KEY */);\r\n        }\r\n        return apiKey;\r\n    };\r\n    SettingsService.prototype.getFlTransportFullUrl = function () {\r\n        return this.flTransportEndpointUrl.concat('?key=', this.transportKey);\r\n    };\r\n    SettingsService.getInstance = function () {\r\n        if (settingsServiceInstance === undefined) {\r\n            settingsServiceInstance = new SettingsService();\r\n        }\r\n        return settingsServiceInstance;\r\n    };\r\n    return SettingsService;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar iid;\r\nfunction getIidPromise() {\r\n    var iidPromise = SettingsService.getInstance().installationsService.getId();\r\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n    iidPromise.then(function (iidVal) {\r\n        iid = iidVal;\r\n    });\r\n    return iidPromise;\r\n}\r\n// This method should be used after the iid is retrieved by getIidPromise method.\r\nfunction getIid() {\r\n    return iid;\r\n}\r\nfunction getAuthTokenPromise() {\r\n    var authTokenPromise = SettingsService.getInstance().installationsService.getToken();\r\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n    authTokenPromise.then(function (authTokenVal) {\r\n    });\r\n    return authTokenPromise;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar VisibilityState;\r\n(function (VisibilityState) {\r\n    VisibilityState[VisibilityState[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\r\n    VisibilityState[VisibilityState[\"VISIBLE\"] = 1] = \"VISIBLE\";\r\n    VisibilityState[VisibilityState[\"HIDDEN\"] = 2] = \"HIDDEN\";\r\n})(VisibilityState || (VisibilityState = {}));\r\nvar RESERVED_ATTRIBUTE_PREFIXES = ['firebase_', 'google_', 'ga_'];\r\nvar ATTRIBUTE_FORMAT_REGEX = new RegExp('^[a-zA-Z]\\\\w*$');\r\nvar MAX_ATTRIBUTE_NAME_LENGTH = 40;\r\nvar MAX_ATTRIBUTE_VALUE_LENGTH = 100;\r\nfunction getServiceWorkerStatus() {\r\n    var navigator = Api.getInstance().navigator;\r\n    if ('serviceWorker' in navigator) {\r\n        if (navigator.serviceWorker.controller) {\r\n            return 2 /* CONTROLLED */;\r\n        }\r\n        else {\r\n            return 3 /* UNCONTROLLED */;\r\n        }\r\n    }\r\n    else {\r\n        return 1 /* UNSUPPORTED */;\r\n    }\r\n}\r\nfunction getVisibilityState() {\r\n    var document = Api.getInstance().document;\r\n    var visibilityState = document.visibilityState;\r\n    switch (visibilityState) {\r\n        case 'visible':\r\n            return VisibilityState.VISIBLE;\r\n        case 'hidden':\r\n            return VisibilityState.HIDDEN;\r\n        default:\r\n            return VisibilityState.UNKNOWN;\r\n    }\r\n}\r\nfunction getEffectiveConnectionType() {\r\n    var navigator = Api.getInstance().navigator;\r\n    var navigatorConnection = navigator.connection;\r\n    var effectiveType = navigatorConnection && navigatorConnection.effectiveType;\r\n    switch (effectiveType) {\r\n        case 'slow-2g':\r\n            return 1 /* CONNECTION_SLOW_2G */;\r\n        case '2g':\r\n            return 2 /* CONNECTION_2G */;\r\n        case '3g':\r\n            return 3 /* CONNECTION_3G */;\r\n        case '4g':\r\n            return 4 /* CONNECTION_4G */;\r\n        default:\r\n            return 0 /* UNKNOWN */;\r\n    }\r\n}\r\nfunction isValidCustomAttributeName(name) {\r\n    if (name.length === 0 || name.length > MAX_ATTRIBUTE_NAME_LENGTH) {\r\n        return false;\r\n    }\r\n    var matchesReservedPrefix = RESERVED_ATTRIBUTE_PREFIXES.some(function (prefix) {\r\n        return name.startsWith(prefix);\r\n    });\r\n    return !matchesReservedPrefix && !!name.match(ATTRIBUTE_FORMAT_REGEX);\r\n}\r\nfunction isValidCustomAttributeValue(value) {\r\n    return value.length !== 0 && value.length <= MAX_ATTRIBUTE_VALUE_LENGTH;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar consoleLogger = new logger$1.Logger(SERVICE_NAME);\r\nconsoleLogger.logLevel = logger$1.LogLevel.INFO;\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar REMOTE_CONFIG_SDK_VERSION = '0.0.1';\r\n// These values will be used if the remote config object is successfully\r\n// retrieved, but the template does not have these fields.\r\nvar DEFAULT_CONFIGS = {\r\n    loggingEnabled: true\r\n};\r\nvar FIS_AUTH_PREFIX = 'FIREBASE_INSTALLATIONS_AUTH';\r\nfunction getConfig(iid) {\r\n    var config = getStoredConfig();\r\n    if (config) {\r\n        processConfig(config);\r\n        return Promise.resolve();\r\n    }\r\n    return getRemoteConfig(iid)\r\n        .then(processConfig)\r\n        .then(function (config) { return storeConfig(config); }, \r\n    /** Do nothing for error, use defaults set in settings service. */\r\n    function () { });\r\n}\r\nfunction getStoredConfig() {\r\n    var localStorage = Api.getInstance().localStorage;\r\n    if (!localStorage) {\r\n        return;\r\n    }\r\n    var expiryString = localStorage.getItem(CONFIG_EXPIRY_LOCAL_STORAGE_KEY);\r\n    if (!expiryString || !configValid(expiryString)) {\r\n        return;\r\n    }\r\n    var configStringified = localStorage.getItem(CONFIG_LOCAL_STORAGE_KEY);\r\n    if (!configStringified) {\r\n        return;\r\n    }\r\n    try {\r\n        var configResponse = JSON.parse(configStringified);\r\n        return configResponse;\r\n    }\r\n    catch (_a) {\r\n        return;\r\n    }\r\n}\r\nfunction storeConfig(config) {\r\n    var localStorage = Api.getInstance().localStorage;\r\n    if (!config || !localStorage) {\r\n        return;\r\n    }\r\n    localStorage.setItem(CONFIG_LOCAL_STORAGE_KEY, JSON.stringify(config));\r\n    localStorage.setItem(CONFIG_EXPIRY_LOCAL_STORAGE_KEY, String(Date.now() +\r\n        SettingsService.getInstance().configTimeToLive * 60 * 60 * 1000));\r\n}\r\nvar COULD_NOT_GET_CONFIG_MSG = 'Could not fetch config, will use default configs';\r\nfunction getRemoteConfig(iid) {\r\n    // Perf needs auth token only to retrieve remote config.\r\n    return getAuthTokenPromise()\r\n        .then(function (authToken) {\r\n        var projectId = SettingsService.getInstance().getProjectId();\r\n        var configEndPoint = \"https://firebaseremoteconfig.googleapis.com/v1/projects/\" + projectId + \"/namespaces/fireperf:fetch?key=\" + SettingsService.getInstance().getApiKey();\r\n        var request = new Request(configEndPoint, {\r\n            method: 'POST',\r\n            headers: { Authorization: FIS_AUTH_PREFIX + \" \" + authToken },\r\n            /* eslint-disable camelcase */\r\n            body: JSON.stringify({\r\n                app_instance_id: iid,\r\n                app_instance_id_token: authToken,\r\n                app_id: SettingsService.getInstance().getAppId(),\r\n                app_version: SDK_VERSION,\r\n                sdk_version: REMOTE_CONFIG_SDK_VERSION\r\n            })\r\n            /* eslint-enable camelcase */\r\n        });\r\n        return fetch(request).then(function (response) {\r\n            if (response.ok) {\r\n                return response.json();\r\n            }\r\n            // In case response is not ok. This will be caught by catch.\r\n            throw ERROR_FACTORY.create(\"RC response not ok\" /* RC_NOT_OK */);\r\n        });\r\n    })\r\n        .catch(function () {\r\n        consoleLogger.info(COULD_NOT_GET_CONFIG_MSG);\r\n        return undefined;\r\n    });\r\n}\r\n/**\r\n * Processes config coming either from calling RC or from local storage.\r\n * This method only runs if call is successful or config in storage\r\n * is valid.\r\n */\r\nfunction processConfig(config) {\r\n    if (!config) {\r\n        return config;\r\n    }\r\n    var settingsServiceInstance = SettingsService.getInstance();\r\n    var entries = config.entries || {};\r\n    if (entries.fpr_enabled !== undefined) {\r\n        // TODO: Change the assignment of loggingEnabled once the received type is\r\n        // known.\r\n        settingsServiceInstance.loggingEnabled =\r\n            String(entries.fpr_enabled) === 'true';\r\n    }\r\n    else {\r\n        // Config retrieved successfully, but there is no fpr_enabled in template.\r\n        // Use secondary configs value.\r\n        settingsServiceInstance.loggingEnabled = DEFAULT_CONFIGS.loggingEnabled;\r\n    }\r\n    if (entries.fpr_log_source) {\r\n        settingsServiceInstance.logSource = Number(entries.fpr_log_source);\r\n    }\r\n    if (entries.fpr_log_endpoint_url) {\r\n        settingsServiceInstance.logEndPointUrl = entries.fpr_log_endpoint_url;\r\n    }\r\n    // Key from Remote Config has to be non-empty string, otherwsie use local value.\r\n    if (entries.fpr_log_transport_key) {\r\n        settingsServiceInstance.transportKey = entries.fpr_log_transport_key;\r\n    }\r\n    if (entries.fpr_vc_network_request_sampling_rate !== undefined) {\r\n        settingsServiceInstance.networkRequestsSamplingRate = Number(entries.fpr_vc_network_request_sampling_rate);\r\n    }\r\n    if (entries.fpr_vc_trace_sampling_rate !== undefined) {\r\n        settingsServiceInstance.tracesSamplingRate = Number(entries.fpr_vc_trace_sampling_rate);\r\n    }\r\n    // Set the per session trace and network logging flags.\r\n    settingsServiceInstance.logTraceAfterSampling = shouldLogAfterSampling(settingsServiceInstance.tracesSamplingRate);\r\n    settingsServiceInstance.logNetworkAfterSampling = shouldLogAfterSampling(settingsServiceInstance.networkRequestsSamplingRate);\r\n    return config;\r\n}\r\nfunction configValid(expiry) {\r\n    return Number(expiry) > Date.now();\r\n}\r\nfunction shouldLogAfterSampling(samplingRate) {\r\n    return Math.random() <= samplingRate;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar initializationStatus = 1 /* notInitialized */;\r\nvar initializationPromise;\r\nfunction getInitializationPromise() {\r\n    initializationStatus = 2 /* initializationPending */;\r\n    initializationPromise = initializationPromise || initializePerf();\r\n    return initializationPromise;\r\n}\r\nfunction isPerfInitialized() {\r\n    return initializationStatus === 3 /* initialized */;\r\n}\r\nfunction initializePerf() {\r\n    return getDocumentReadyComplete()\r\n        .then(function () { return getIidPromise(); })\r\n        .then(function (iid) { return getConfig(iid); })\r\n        .then(function () { return changeInitializationStatus(); }, function () { return changeInitializationStatus(); });\r\n}\r\n/**\r\n * Returns a promise which resolves whenever the document readystate is complete or\r\n * immediately if it is called after page load complete.\r\n */\r\nfunction getDocumentReadyComplete() {\r\n    var document = Api.getInstance().document;\r\n    return new Promise(function (resolve) {\r\n        if (document && document.readyState !== 'complete') {\r\n            var handler_1 = function () {\r\n                if (document.readyState === 'complete') {\r\n                    document.removeEventListener('readystatechange', handler_1);\r\n                    resolve();\r\n                }\r\n            };\r\n            document.addEventListener('readystatechange', handler_1);\r\n        }\r\n        else {\r\n            resolve();\r\n        }\r\n    });\r\n}\r\nfunction changeInitializationStatus() {\r\n    initializationStatus = 3 /* initialized */;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar DEFAULT_SEND_INTERVAL_MS = 10 * 1000;\r\nvar INITIAL_SEND_TIME_DELAY_MS = 5.5 * 1000;\r\n// If end point does not work, the call will be tried for these many times.\r\nvar DEFAULT_REMAINING_TRIES = 3;\r\nvar remainingTries = DEFAULT_REMAINING_TRIES;\r\n/* eslint-enable camelcase */\r\nvar queue = [];\r\nvar isTransportSetup = false;\r\nfunction setupTransportService() {\r\n    if (!isTransportSetup) {\r\n        processQueue(INITIAL_SEND_TIME_DELAY_MS);\r\n        isTransportSetup = true;\r\n    }\r\n}\r\nfunction processQueue(timeOffset) {\r\n    setTimeout(function () {\r\n        // If there is no remainingTries left, stop retrying.\r\n        if (remainingTries === 0) {\r\n            return;\r\n        }\r\n        // If there are no events to process, wait for DEFAULT_SEND_INTERVAL_MS and try again.\r\n        if (!queue.length) {\r\n            return processQueue(DEFAULT_SEND_INTERVAL_MS);\r\n        }\r\n        dispatchQueueEvents();\r\n    }, timeOffset);\r\n}\r\nfunction dispatchQueueEvents() {\r\n    // Capture a snapshot of the queue and empty the \"official queue\".\r\n    var staged = tslib.__spreadArrays(queue);\r\n    queue = [];\r\n    /* eslint-disable camelcase */\r\n    // We will pass the JSON serialized event to the backend.\r\n    var log_event = staged.map(function (evt) { return ({\r\n        source_extension_json_proto3: evt.message,\r\n        event_time_ms: String(evt.eventTime)\r\n    }); });\r\n    var data = {\r\n        request_time_ms: String(Date.now()),\r\n        client_info: {\r\n            client_type: 1,\r\n            js_client_info: {}\r\n        },\r\n        log_source: SettingsService.getInstance().logSource,\r\n        log_event: log_event\r\n    };\r\n    /* eslint-enable camelcase */\r\n    sendEventsToFl(data, staged).catch(function () {\r\n        // If the request fails for some reason, add the events that were attempted\r\n        // back to the primary queue to retry later.\r\n        queue = tslib.__spreadArrays(staged, queue);\r\n        remainingTries--;\r\n        consoleLogger.info(\"Tries left: \" + remainingTries + \".\");\r\n        processQueue(DEFAULT_SEND_INTERVAL_MS);\r\n    });\r\n}\r\nfunction sendEventsToFl(data, staged) {\r\n    return postToFlEndpoint(data)\r\n        .then(function (res) {\r\n        if (!res.ok) {\r\n            consoleLogger.info('Call to Firebase backend failed.');\r\n        }\r\n        return res.json();\r\n    })\r\n        .then(function (res) {\r\n        // Find the next call wait time from the response.\r\n        var transportWait = Number(res.nextRequestWaitMillis);\r\n        var requestOffset = DEFAULT_SEND_INTERVAL_MS;\r\n        if (!isNaN(transportWait)) {\r\n            requestOffset = Math.max(transportWait, requestOffset);\r\n        }\r\n        // Delete request if response include RESPONSE_ACTION_UNKNOWN or DELETE_REQUEST action.\r\n        // Otherwise, retry request using normal scheduling if response include RETRY_REQUEST_LATER.\r\n        var logResponseDetails = res.logResponseDetails;\r\n        if (Array.isArray(logResponseDetails) &&\r\n            logResponseDetails.length > 0 &&\r\n            logResponseDetails[0].responseAction === 'RETRY_REQUEST_LATER') {\r\n            queue = tslib.__spreadArrays(staged, queue);\r\n            consoleLogger.info(\"Retry transport request later.\");\r\n        }\r\n        remainingTries = DEFAULT_REMAINING_TRIES;\r\n        // Schedule the next process.\r\n        processQueue(requestOffset);\r\n    });\r\n}\r\nfunction postToFlEndpoint(data) {\r\n    var flTransportFullUrl = SettingsService.getInstance().getFlTransportFullUrl();\r\n    return fetch(flTransportFullUrl, {\r\n        method: 'POST',\r\n        body: JSON.stringify(data)\r\n    });\r\n}\r\nfunction addToQueue(evt) {\r\n    if (!evt.eventTime || !evt.message) {\r\n        throw ERROR_FACTORY.create(\"invalid cc log\" /* INVALID_CC_LOG */);\r\n    }\r\n    // Add the new event to the queue.\r\n    queue = tslib.__spreadArrays(queue, [evt]);\r\n}\r\n/** Log handler for cc service to send the performance logs to the server. */\r\nfunction transportHandler(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nserializer) {\r\n    return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var message = serializer.apply(void 0, args);\r\n        addToQueue({\r\n            message: message,\r\n            eventTime: Date.now()\r\n        });\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/* eslint-enble camelcase */\r\nvar logger;\r\n// This method is not called before initialization.\r\nfunction sendLog(resource, resourceType) {\r\n    if (!logger) {\r\n        logger = transportHandler(serializer);\r\n    }\r\n    logger(resource, resourceType);\r\n}\r\nfunction logTrace(trace) {\r\n    var settingsService = SettingsService.getInstance();\r\n    // Do not log if trace is auto generated and instrumentation is disabled.\r\n    if (!settingsService.instrumentationEnabled && trace.isAuto) {\r\n        return;\r\n    }\r\n    // Do not log if trace is custom and data collection is disabled.\r\n    if (!settingsService.dataCollectionEnabled && !trace.isAuto) {\r\n        return;\r\n    }\r\n    // Do not log if required apis are not available.\r\n    if (!Api.getInstance().requiredApisAvailable()) {\r\n        return;\r\n    }\r\n    // Only log the page load auto traces if page is visible.\r\n    if (trace.isAuto && getVisibilityState() !== VisibilityState.VISIBLE) {\r\n        return;\r\n    }\r\n    if (!settingsService.loggingEnabled ||\r\n        !settingsService.logTraceAfterSampling) {\r\n        return;\r\n    }\r\n    if (isPerfInitialized()) {\r\n        sendTraceLog(trace);\r\n    }\r\n    else {\r\n        // Custom traces can be used before the initialization but logging\r\n        // should wait until after.\r\n        getInitializationPromise().then(function () { return sendTraceLog(trace); }, function () { return sendTraceLog(trace); });\r\n    }\r\n}\r\nfunction sendTraceLog(trace) {\r\n    if (getIid()) {\r\n        setTimeout(function () { return sendLog(trace, 1 /* Trace */); }, 0);\r\n    }\r\n}\r\nfunction logNetworkRequest(networkRequest) {\r\n    var settingsService = SettingsService.getInstance();\r\n    // Do not log network requests if instrumentation is disabled.\r\n    if (!settingsService.instrumentationEnabled) {\r\n        return;\r\n    }\r\n    // Do not log the js sdk's call to transport service domain to avoid unnecessary cycle.\r\n    // Need to blacklist both old and new endpoints to avoid migration gap.\r\n    var networkRequestUrl = networkRequest.url;\r\n    // Blacklist old log endpoint and new transport endpoint.\r\n    // Because Performance SDK doesn't instrument requests sent from SDK itself.\r\n    var logEndpointUrl = settingsService.logEndPointUrl.split('?')[0];\r\n    var flEndpointUrl = settingsService.flTransportEndpointUrl.split('?')[0];\r\n    if (networkRequestUrl === logEndpointUrl ||\r\n        networkRequestUrl === flEndpointUrl) {\r\n        return;\r\n    }\r\n    if (!settingsService.loggingEnabled ||\r\n        !settingsService.logNetworkAfterSampling) {\r\n        return;\r\n    }\r\n    setTimeout(function () { return sendLog(networkRequest, 0 /* NetworkRequest */); }, 0);\r\n}\r\nfunction serializer(resource, resourceType) {\r\n    if (resourceType === 0 /* NetworkRequest */) {\r\n        return serializeNetworkRequest(resource);\r\n    }\r\n    return serializeTrace(resource);\r\n}\r\nfunction serializeNetworkRequest(networkRequest) {\r\n    var networkRequestMetric = {\r\n        url: networkRequest.url,\r\n        http_method: networkRequest.httpMethod || 0,\r\n        http_response_code: 200,\r\n        response_payload_bytes: networkRequest.responsePayloadBytes,\r\n        client_start_time_us: networkRequest.startTimeUs,\r\n        time_to_response_initiated_us: networkRequest.timeToResponseInitiatedUs,\r\n        time_to_response_completed_us: networkRequest.timeToResponseCompletedUs\r\n    };\r\n    var perfMetric = {\r\n        application_info: getApplicationInfo(),\r\n        network_request_metric: networkRequestMetric\r\n    };\r\n    return JSON.stringify(perfMetric);\r\n}\r\nfunction serializeTrace(trace) {\r\n    var traceMetric = {\r\n        name: trace.name,\r\n        is_auto: trace.isAuto,\r\n        client_start_time_us: trace.startTimeUs,\r\n        duration_us: trace.durationUs\r\n    };\r\n    if (Object.keys(trace.counters).length !== 0) {\r\n        traceMetric.counters = trace.counters;\r\n    }\r\n    var customAttributes = trace.getAttributes();\r\n    if (Object.keys(customAttributes).length !== 0) {\r\n        traceMetric.custom_attributes = customAttributes;\r\n    }\r\n    var perfMetric = {\r\n        application_info: getApplicationInfo(),\r\n        trace_metric: traceMetric\r\n    };\r\n    return JSON.stringify(perfMetric);\r\n}\r\nfunction getApplicationInfo() {\r\n    return {\r\n        google_app_id: SettingsService.getInstance().getAppId(),\r\n        app_instance_id: getIid(),\r\n        web_app_info: {\r\n            sdk_version: SDK_VERSION,\r\n            page_url: Api.getInstance().getUrl(),\r\n            service_worker_status: getServiceWorkerStatus(),\r\n            visibility_state: getVisibilityState(),\r\n            effective_connection_type: getEffectiveConnectionType()\r\n        },\r\n        application_process_state: 0\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar MAX_METRIC_NAME_LENGTH = 100;\r\nvar RESERVED_AUTO_PREFIX = '_';\r\nvar oobMetrics = [\r\n    FIRST_PAINT_COUNTER_NAME,\r\n    FIRST_CONTENTFUL_PAINT_COUNTER_NAME,\r\n    FIRST_INPUT_DELAY_COUNTER_NAME\r\n];\r\n/**\r\n * Returns true if the metric is custom and does not start with reserved prefix, or if\r\n * the metric is one of out of the box page load trace metrics.\r\n */\r\nfunction isValidMetricName(name, traceName) {\r\n    if (name.length === 0 || name.length > MAX_METRIC_NAME_LENGTH) {\r\n        return false;\r\n    }\r\n    return ((traceName &&\r\n        traceName.startsWith(OOB_TRACE_PAGE_LOAD_PREFIX) &&\r\n        oobMetrics.indexOf(name) > -1) ||\r\n        !name.startsWith(RESERVED_AUTO_PREFIX));\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar Trace = /** @class */ (function () {\r\n    /**\r\n     * @param name The name of the trace.\r\n     * @param isAuto If the trace is auto-instrumented.\r\n     * @param traceMeasureName The name of the measure marker in user timing specification. This field\r\n     * is only set when the trace is built for logging when the user directly uses the user timing\r\n     * api (performance.mark and performance.measure).\r\n     */\r\n    function Trace(name, isAuto, traceMeasureName) {\r\n        if (isAuto === void 0) { isAuto = false; }\r\n        this.name = name;\r\n        this.isAuto = isAuto;\r\n        this.state = 1 /* UNINITIALIZED */;\r\n        this.customAttributes = {};\r\n        this.counters = {};\r\n        this.api = Api.getInstance();\r\n        this.randomId = Math.floor(Math.random() * 1000000);\r\n        if (!this.isAuto) {\r\n            this.traceStartMark = TRACE_START_MARK_PREFIX + \"-\" + this.randomId + \"-\" + this.name;\r\n            this.traceStopMark = TRACE_STOP_MARK_PREFIX + \"-\" + this.randomId + \"-\" + this.name;\r\n            this.traceMeasure =\r\n                traceMeasureName ||\r\n                    TRACE_MEASURE_PREFIX + \"-\" + this.randomId + \"-\" + this.name;\r\n            if (traceMeasureName) {\r\n                // For the case of direct user timing traces, no start stop will happen. The measure object\r\n                // is already available.\r\n                this.calculateTraceMetrics();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Starts a trace. The measurement of the duration starts at this point.\r\n     */\r\n    Trace.prototype.start = function () {\r\n        if (this.state !== 1 /* UNINITIALIZED */) {\r\n            throw ERROR_FACTORY.create(\"trace started\" /* TRACE_STARTED_BEFORE */, {\r\n                traceName: this.name\r\n            });\r\n        }\r\n        this.api.mark(this.traceStartMark);\r\n        this.state = 2 /* RUNNING */;\r\n    };\r\n    /**\r\n     * Stops the trace. The measurement of the duration of the trace stops at this point and trace\r\n     * is logged.\r\n     */\r\n    Trace.prototype.stop = function () {\r\n        if (this.state !== 2 /* RUNNING */) {\r\n            throw ERROR_FACTORY.create(\"trace stopped\" /* TRACE_STOPPED_BEFORE */, {\r\n                traceName: this.name\r\n            });\r\n        }\r\n        this.state = 3 /* TERMINATED */;\r\n        this.api.mark(this.traceStopMark);\r\n        this.api.measure(this.traceMeasure, this.traceStartMark, this.traceStopMark);\r\n        this.calculateTraceMetrics();\r\n        logTrace(this);\r\n    };\r\n    /**\r\n     * Records a trace with predetermined values. If this method is used a trace is created and logged\r\n     * directly. No need to use start and stop methods.\r\n     * @param startTime Trace start time since epoch in millisec\r\n     * @param duration The duraction of the trace in millisec\r\n     * @param options An object which can optionally hold maps of custom metrics and custom attributes\r\n     */\r\n    Trace.prototype.record = function (startTime, duration, options) {\r\n        this.durationUs = Math.floor(duration * 1000);\r\n        this.startTimeUs = Math.floor(startTime * 1000);\r\n        if (options && options.attributes) {\r\n            this.customAttributes = tslib.__assign({}, options.attributes);\r\n        }\r\n        if (options && options.metrics) {\r\n            for (var _i = 0, _a = Object.keys(options.metrics); _i < _a.length; _i++) {\r\n                var metric = _a[_i];\r\n                if (!isNaN(Number(options.metrics[metric]))) {\r\n                    this.counters[metric] = Number(Math.floor(options.metrics[metric]));\r\n                }\r\n            }\r\n        }\r\n        logTrace(this);\r\n    };\r\n    /**\r\n     * Increments a custom metric by a certain number or 1 if number not specified. Will create a new\r\n     * custom metric if one with the given name does not exist.\r\n     * @param counter Name of the custom metric\r\n     * @param num Increment by value\r\n     */\r\n    Trace.prototype.incrementMetric = function (counter, num) {\r\n        if (num === void 0) { num = 1; }\r\n        if (this.counters[counter] === undefined) {\r\n            this.putMetric(counter, 0);\r\n        }\r\n        this.counters[counter] += num;\r\n    };\r\n    /**\r\n     * Sets a custom metric to a specified value. Will create a new custom metric if one with the\r\n     * given name does not exist.\r\n     * @param counter Name of the custom metric\r\n     * @param num Set custom metric to this value\r\n     */\r\n    Trace.prototype.putMetric = function (counter, num) {\r\n        if (isValidMetricName(counter, this.name)) {\r\n            this.counters[counter] = num;\r\n        }\r\n        else {\r\n            throw ERROR_FACTORY.create(\"invalid custom metric name\" /* INVALID_CUSTOM_METRIC_NAME */, {\r\n                customMetricName: counter\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Returns the value of the custom metric by that name. If a custom metric with that name does\r\n     * not exist will return zero.\r\n     * @param counter\r\n     */\r\n    Trace.prototype.getMetric = function (counter) {\r\n        return this.counters[counter] || 0;\r\n    };\r\n    /**\r\n     * Sets a custom attribute of a trace to a certain value.\r\n     * @param attr\r\n     * @param value\r\n     */\r\n    Trace.prototype.putAttribute = function (attr, value) {\r\n        var isValidName = isValidCustomAttributeName(attr);\r\n        var isValidValue = isValidCustomAttributeValue(value);\r\n        if (isValidName && isValidValue) {\r\n            this.customAttributes[attr] = value;\r\n            return;\r\n        }\r\n        // Throw appropriate error when the attribute name or value is invalid.\r\n        if (!isValidName) {\r\n            throw ERROR_FACTORY.create(\"invalid attribute name\" /* INVALID_ATTRIBUTE_NAME */, {\r\n                attributeName: attr\r\n            });\r\n        }\r\n        if (!isValidValue) {\r\n            throw ERROR_FACTORY.create(\"invalid attribute value\" /* INVALID_ATTRIBUTE_VALUE */, {\r\n                attributeValue: value\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Retrieves the value a custom attribute of a trace is set to.\r\n     * @param attr\r\n     */\r\n    Trace.prototype.getAttribute = function (attr) {\r\n        return this.customAttributes[attr];\r\n    };\r\n    Trace.prototype.removeAttribute = function (attr) {\r\n        if (this.customAttributes[attr] === undefined) {\r\n            return;\r\n        }\r\n        delete this.customAttributes[attr];\r\n    };\r\n    Trace.prototype.getAttributes = function () {\r\n        return tslib.__assign({}, this.customAttributes);\r\n    };\r\n    Trace.prototype.setStartTime = function (startTime) {\r\n        this.startTimeUs = startTime;\r\n    };\r\n    Trace.prototype.setDuration = function (duration) {\r\n        this.durationUs = duration;\r\n    };\r\n    /**\r\n     * Calculates and assigns the duration and start time of the trace using the measure performance\r\n     * entry.\r\n     */\r\n    Trace.prototype.calculateTraceMetrics = function () {\r\n        var perfMeasureEntries = this.api.getEntriesByName(this.traceMeasure);\r\n        var perfMeasureEntry = perfMeasureEntries && perfMeasureEntries[0];\r\n        if (perfMeasureEntry) {\r\n            this.durationUs = Math.floor(perfMeasureEntry.duration * 1000);\r\n            this.startTimeUs = Math.floor((perfMeasureEntry.startTime + this.api.getTimeOrigin()) * 1000);\r\n        }\r\n    };\r\n    /**\r\n     * @param navigationTimings A single element array which contains the navigationTIming object of\r\n     * the page load\r\n     * @param paintTimings A array which contains paintTiming object of the page load\r\n     * @param firstInputDelay First input delay in millisec\r\n     */\r\n    Trace.createOobTrace = function (navigationTimings, paintTimings, firstInputDelay) {\r\n        var route = Api.getInstance().getUrl();\r\n        if (!route) {\r\n            return;\r\n        }\r\n        var trace = new Trace(OOB_TRACE_PAGE_LOAD_PREFIX + route, true);\r\n        var timeOriginUs = Math.floor(Api.getInstance().getTimeOrigin() * 1000);\r\n        trace.setStartTime(timeOriginUs);\r\n        // navigationTimings includes only one element.\r\n        if (navigationTimings && navigationTimings[0]) {\r\n            trace.setDuration(Math.floor(navigationTimings[0].duration * 1000));\r\n            trace.putMetric('domInteractive', Math.floor(navigationTimings[0].domInteractive * 1000));\r\n            trace.putMetric('domContentLoadedEventEnd', Math.floor(navigationTimings[0].domContentLoadedEventEnd * 1000));\r\n            trace.putMetric('loadEventEnd', Math.floor(navigationTimings[0].loadEventEnd * 1000));\r\n        }\r\n        var FIRST_PAINT = 'first-paint';\r\n        var FIRST_CONTENTFUL_PAINT = 'first-contentful-paint';\r\n        if (paintTimings) {\r\n            var firstPaint = paintTimings.find(function (paintObject) { return paintObject.name === FIRST_PAINT; });\r\n            if (firstPaint && firstPaint.startTime) {\r\n                trace.putMetric(FIRST_PAINT_COUNTER_NAME, Math.floor(firstPaint.startTime * 1000));\r\n            }\r\n            var firstContentfulPaint = paintTimings.find(function (paintObject) { return paintObject.name === FIRST_CONTENTFUL_PAINT; });\r\n            if (firstContentfulPaint && firstContentfulPaint.startTime) {\r\n                trace.putMetric(FIRST_CONTENTFUL_PAINT_COUNTER_NAME, Math.floor(firstContentfulPaint.startTime * 1000));\r\n            }\r\n            if (firstInputDelay) {\r\n                trace.putMetric(FIRST_INPUT_DELAY_COUNTER_NAME, Math.floor(firstInputDelay * 1000));\r\n            }\r\n        }\r\n        logTrace(trace);\r\n    };\r\n    Trace.createUserTimingTrace = function (measureName) {\r\n        var trace = new Trace(measureName, false, measureName);\r\n        logTrace(trace);\r\n    };\r\n    return Trace;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction createNetworkRequestEntry(entry) {\r\n    var performanceEntry = entry;\r\n    if (!performanceEntry || performanceEntry.responseStart === undefined) {\r\n        return;\r\n    }\r\n    var timeOrigin = Api.getInstance().getTimeOrigin();\r\n    var startTimeUs = Math.floor((performanceEntry.startTime + timeOrigin) * 1000);\r\n    var timeToResponseInitiatedUs = performanceEntry.responseStart\r\n        ? Math.floor((performanceEntry.responseStart - performanceEntry.startTime) * 1000)\r\n        : undefined;\r\n    var timeToResponseCompletedUs = Math.floor((performanceEntry.responseEnd - performanceEntry.startTime) * 1000);\r\n    // Remove the query params from logged network request url.\r\n    var url = performanceEntry.name && performanceEntry.name.split('?')[0];\r\n    var networkRequest = {\r\n        url: url,\r\n        responsePayloadBytes: performanceEntry.transferSize,\r\n        startTimeUs: startTimeUs,\r\n        timeToResponseInitiatedUs: timeToResponseInitiatedUs,\r\n        timeToResponseCompletedUs: timeToResponseCompletedUs\r\n    };\r\n    logNetworkRequest(networkRequest);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar FID_WAIT_TIME_MS = 5000;\r\nfunction setupOobResources() {\r\n    // Do not initialize unless iid is available.\r\n    if (!getIid()) {\r\n        return;\r\n    }\r\n    // The load event might not have fired yet, and that means performance navigation timing\r\n    // object has a duration of 0. The setup should run after all current tasks in js queue.\r\n    setTimeout(function () { return setupOobTraces(); }, 0);\r\n    setTimeout(function () { return setupNetworkRequests(); }, 0);\r\n    setTimeout(function () { return setupUserTimingTraces(); }, 0);\r\n}\r\nfunction setupNetworkRequests() {\r\n    var api = Api.getInstance();\r\n    var resources = api.getEntriesByType('resource');\r\n    for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\r\n        var resource = resources_1[_i];\r\n        createNetworkRequestEntry(resource);\r\n    }\r\n    api.setupObserver('resource', createNetworkRequestEntry);\r\n}\r\nfunction setupOobTraces() {\r\n    var api = Api.getInstance();\r\n    var navigationTimings = api.getEntriesByType('navigation');\r\n    var paintTimings = api.getEntriesByType('paint');\r\n    // If First Input Desly polyfill is added to the page, report the fid value.\r\n    // https://github.com/GoogleChromeLabs/first-input-delay\r\n    if (api.onFirstInputDelay) {\r\n        // If the fid call back is not called for certain time, continue without it.\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        var timeoutId_1 = setTimeout(function () {\r\n            Trace.createOobTrace(navigationTimings, paintTimings);\r\n            timeoutId_1 = undefined;\r\n        }, FID_WAIT_TIME_MS);\r\n        api.onFirstInputDelay(function (fid) {\r\n            if (timeoutId_1) {\r\n                clearTimeout(timeoutId_1);\r\n                Trace.createOobTrace(navigationTimings, paintTimings, fid);\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        Trace.createOobTrace(navigationTimings, paintTimings);\r\n    }\r\n}\r\nfunction setupUserTimingTraces() {\r\n    var api = Api.getInstance();\r\n    // Run through the measure performance entries collected up to this point.\r\n    var measures = api.getEntriesByType('measure');\r\n    for (var _i = 0, measures_1 = measures; _i < measures_1.length; _i++) {\r\n        var measure = measures_1[_i];\r\n        createUserTimingTrace(measure);\r\n    }\r\n    // Setup an observer to capture the measures from this point on.\r\n    api.setupObserver('measure', createUserTimingTrace);\r\n}\r\nfunction createUserTimingTrace(measure) {\r\n    var measureName = measure.name;\r\n    // Do not create a trace, if the user timing marks and measures are created by the sdk itself.\r\n    if (measureName.substring(0, TRACE_MEASURE_PREFIX.length) ===\r\n        TRACE_MEASURE_PREFIX) {\r\n        return;\r\n    }\r\n    Trace.createUserTimingTrace(measureName);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar PerformanceController = /** @class */ (function () {\r\n    function PerformanceController(app) {\r\n        this.app = app;\r\n        if (Api.getInstance().requiredApisAvailable()) {\r\n            setupTransportService();\r\n            getInitializationPromise().then(setupOobResources, setupOobResources);\r\n        }\r\n        else {\r\n            consoleLogger.info('Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.');\r\n        }\r\n    }\r\n    PerformanceController.prototype.trace = function (name) {\r\n        return new Trace(name);\r\n    };\r\n    Object.defineProperty(PerformanceController.prototype, \"instrumentationEnabled\", {\r\n        get: function () {\r\n            return SettingsService.getInstance().instrumentationEnabled;\r\n        },\r\n        set: function (val) {\r\n            SettingsService.getInstance().instrumentationEnabled = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PerformanceController.prototype, \"dataCollectionEnabled\", {\r\n        get: function () {\r\n            return SettingsService.getInstance().dataCollectionEnabled;\r\n        },\r\n        set: function (val) {\r\n            SettingsService.getInstance().dataCollectionEnabled = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return PerformanceController;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar DEFAULT_ENTRY_NAME = '[DEFAULT]';\r\nfunction registerPerformance(instance) {\r\n    var factoryMethod = function (app, installations) {\r\n        if (app.name !== DEFAULT_ENTRY_NAME) {\r\n            throw ERROR_FACTORY.create(\"FB not default\" /* FB_NOT_DEFAULT */);\r\n        }\r\n        if (typeof window === 'undefined') {\r\n            throw ERROR_FACTORY.create(\"no window\" /* NO_WINDOW */);\r\n        }\r\n        setupApi(window);\r\n        SettingsService.getInstance().firebaseAppInstance = app;\r\n        SettingsService.getInstance().installationsService = installations;\r\n        return new PerformanceController(app);\r\n    };\r\n    // Register performance with firebase-app.\r\n    instance.INTERNAL.registerComponent(new component.Component('performance', function (container) {\r\n        /* Dependencies */\r\n        // getImmediate for FirebaseApp will always succeed\r\n        var app = container.getProvider('app').getImmediate();\r\n        // The following call will always succeed because perf has `import '@firebase/installations'`\r\n        var installations = container\r\n            .getProvider('installations')\r\n            .getImmediate();\r\n        return factoryMethod(app, installations);\r\n    }, \"PUBLIC\" /* PUBLIC */));\r\n    instance.registerVersion(name, version);\r\n}\r\nregisterPerformance(firebase);\n\nexports.registerPerformance = registerPerformance;\n//# sourceMappingURL=index.cjs.js.map\n","'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar firebase = _interopDefault(require('@firebase/app'));\nrequire('@firebase/auth');\nrequire('@firebase/database');\nrequire('@firebase/firestore');\nrequire('@firebase/functions');\nrequire('@firebase/messaging');\nrequire('@firebase/storage');\nrequire('@firebase/performance');\nrequire('@firebase/analytics');\nrequire('@firebase/remote-config');\n\nvar name = \"firebase\";\nvar version = \"7.15.0\";\n\n/**\r\n * @license\r\n * Copyright 2018 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfirebase.registerVersion(name, version, 'app');\n\nvar name$1 = \"firebase\";\nvar version$1 = \"7.15.0\";\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconsole.warn(\"\\nIt looks like you're using the development build of the Firebase JS SDK.\\nWhen deploying Firebase apps to production, it is advisable to only import\\nthe individual SDK components you intend to use.\\n\\nFor the module builds, these are available in the following manner\\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\\n\\nCommonJS Modules:\\nconst firebase = require('firebase/app');\\nrequire('firebase/<PACKAGE>');\\n\\nES Modules:\\nimport firebase from 'firebase/app';\\nimport 'firebase/<PACKAGE>';\\n\\nTypescript:\\nimport * as firebase from 'firebase/app';\\nimport 'firebase/<PACKAGE>';\\n\");\r\nfirebase.registerVersion(name$1, version$1);\n\nmodule.exports = firebase;\n//# sourceMappingURL=index.cjs.js.map\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n"],"sourceRoot":""}